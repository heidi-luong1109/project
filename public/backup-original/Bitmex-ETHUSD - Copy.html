

<html> 

<head>
   

<title>coinfarm bitmex margin long short position</title>
<meta name="viewport" content="width=device-width">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link rel="stylesheet" href="css/proBar_m.css">
<script src="https://code.jquery.com/jquery-1.12.3.min.js" ></script>



<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

	<style>
	canvas {
		-moz-user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

body{

	font-family:'Arial';
}


.btn_act {
	font-size:0.8rem;width:120px;height:100%;border:1px solid #000;background:linear-gradient( to bottom, #efefef, #999 );color:#000;
}



.btn_chart {

	font-size:0.8rem;height:30px;border:1px solid #000;background:#efefef;color:#000;width:80px;
}

.btn_chart2 {

	font-size:0.8rem;height:30px;border:1px solid #000;background:#13c600;color:#fff;width:80px;
}




.t1{
	border-right:1px solid #000;
}
.t2{
	border-right:1px solid #000;
	;padding-right:5px;text-align:right;
}
.c1{

color:#ff0000;border-right:1px solid #000;padding-right:5px;text-align:right;
}
.c2{

 color:#009619;border-right:1px solid #000;padding-right:5px;text-align:right;
}

.c3{

color:#000000;border-right:1px solid #000;padding-right:5px;text-align:right;
}
@import url(https://fonts.googleapis.com/css?family=Oxygen+Mono);
/* Starter CSS for Menu */
#cssmenu {
  padding: 0;
  margin: 0;
  border: 0;
  width: auto;
}
#cssmenu ul,
#cssmenu li {
  list-style: none;
  margin: 0;
  padding: 0;
}
#cssmenu ul {
  position: relative;
  z-index: 597;
}
#cssmenu ul li {
  float: left;
  min-height: 1px;
  vertical-align: middle;
}
#cssmenu ul li.hover,
#cssmenu ul li:hover {
  position: relative;
  z-index: 599;
  cursor: default;
}
#cssmenu ul ul {
  visibility: hidden;
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 598;
  width: 100%;
}
#cssmenu ul ul li {
  float: none;
}
#cssmenu ul ul ul {
  top: 0;
  left: 190px;
  width: 190px;
}
#cssmenu ul li:hover > ul {
  visibility: visible;
}
#cssmenu ul ul {
  bottom: 0;
  left: 0;
}
#cssmenu ul ul {
  margin-top: 0;
}
#cssmenu ul ul li {
  font-weight: normal;
}
#cssmenu a {
  display: block;
  line-height: 1em;
  text-decoration: none;
}
/* Custom CSS Styles */
#cssmenu {
  background: #333;
  border-bottom: 4px solid #1b9bff;
  font-family: 'Oxygen Mono', Tahoma, Arial, sans-serif;
  font-size: 1rem;
}
#cssmenu > ul {
  *display: inline-block;
}
#cssmenu:after,
#cssmenu ul:after {
  content: '';
  display: block;
  clear: both;
}
#cssmenu ul {
  text-transform: uppercase;
}
#cssmenu ul ul {
  border-top: 4px solid #1b9bff;
  text-transform: none;
  min-width: 190px;
}
#cssmenu ul ul a {
  background: #1b9bff;
  color: #ffffff;
  border: 1px solid #0082e7;
  border-top: 0 none;
  line-height: 150%;
  padding: 16px 20px;
  font-size: 12px;
}
#cssmenu ul ul ul {
  border-top: 0 none;
}
#cssmenu ul ul li {
  position: relative;
}
#cssmenu ul ul li:first-child > a {
  border-top: 1px solid #0082e7;
}
#cssmenu ul ul li:hover > a {
  background: #4eb1ff;
  color: #ffffff;
}
#cssmenu ul ul li:last-child > a {
  -moz-border-radius: 0 0 3px 3px;
  -webkit-border-radius: 0 0 3px 3px;
  border-radius: 0 0 3px 3px;
  -moz-background-clip: padding;
  -webkit-background-clip: padding-box;
  background-clip: padding-box;
  -moz-box-shadow: 0 1px 0 #1b9bff;
  -webkit-box-shadow: 0 1px 0 #1b9bff;
  box-shadow: 0 1px 0 #1b9bff;
}
#cssmenu ul ul li:last-child:hover > a {
  -moz-border-radius: 0 0 0 3px;
  -webkit-border-radius: 0 0 0 3px;
  border-radius: 0 0 0 3px;
  -moz-background-clip: padding;
  -webkit-background-clip: padding-box;
  background-clip: padding-box;
}
#cssmenu ul ul li.has-sub > a:after {
  content: '+';
  position: absolute;
  top: 50%;
  right: 15px;
  margin-top: -8px;
}
#cssmenu ul li:hover > a,
#cssmenu ul li.active > a {
  background: #1b9bff;
  color: #ffffff;
}
#cssmenu ul li.has-sub > a:after {
  content: '+';
  margin-left: 5px;
}
#cssmenu ul li.last ul {
  left: auto;
  right: 0;
}
#cssmenu ul li.last ul ul {
  left: auto;
  right: 99.5%;
}
#cssmenu a {
  background: #333;
  color: #CBCBCB;
  padding: 0 20px;
}
#cssmenu > ul > li > a {
  line-height: 48px;
  font-size: 12px;
}
#cssmenu.align-center > ul {
  text-align: center;
  font-size: 0;
}
#cssmenu.align-center > ul > li {
  display: inline-block;
  float: none;
}
#cssmenu.align-center ul ul {
  text-align: left;
}
#cssmenu.align-right > ul > li {
  float: right;
}
#cssmenu.align-right ul ul {
  left: auto;
  right: 0;
  text-align: right;
}
#cssmenu.align-right ul ul ul {
  left: auto;
  right: 190px;
}
#cssmenu.align-right ul ul li.has-sub > a:after {
  left: 15px;
  right: auto;
}

</style>


<style type="text/css">


    
.sidenav {
    height: 100%;
    width: 0;
    position: fixed;
    z-index: 100;
    top: 150px;
    left: 0;
    background-color: #111;
    overflow-x: hidden;
    transition: 0.5s;
    padding-top: 20px;
}

.sidenav a {
    padding: 8px 8px 8px 32px;
    text-decoration: none;
    font-size: 1.6rem;
    color: #818181;
    display: block;
    transition: 0.3s;
}

.sidenav a:hover {
    color: #f1f1f1;
}

.sidenav .closebtn {
    position: absolute;
    top: 0;
    right: 25px;
    font-size: 40px;
    margin-left: 50px;
}

@media screen and (max-height: 400px) {
  .sidenav {padding-top: 15px;}
  .sidenav a {font-size: 1.8rem;}
}

#fixed-menu {
  width: 100%;
  background-color: #ffffff;
  position: fixed;
  top: 0px;
  left: 0px;
  z-index:99999;
}

#main-content {
  width: 100%;
  margin-top: 152px;
}



.sidenav_cart {
    height: 100%;
    width: 0;
    position: fixed;
    z-index: 100;
    top: 150px;
    right: 0;
    background-color: #111;
    overflow-x: hidden;
    transition: 0.5s;
    padding-top: 20px;
}

.sidenav_cart a {
    padding: 8px 8px 8px 32px;
    text-decoration: none;
    font-size: 1.6rem;
    color: #818181;
    display: block;
    transition: 0.3s;
}

.sidenav_cart a:hover {
    color: #f1f1f1;
}

.sidenav_cart .closebtn {
    position: absolute;
    top: 0;
    right: 25px;
    font-size: 40px;
    margin-left: 50px;
}

@media screen and (max-height: 400px) {
  .sidenav_cart {padding-top: 15px;}
  .sidenav_cart a {font-size: 1.8rem;}
}




body {font-size:0.8rem; margin:0; padding:0;}



.chat_btn {-webkit-appearance: none;display:inline-block; height:20px;width:40px;padding:0 0px 0; background-color:#ffffff; font-size:11px; color:#333333; line-height:20px;border-radius: 2px;vertical-align:middle;border: 1px solid #dedede; background-color:#ffffff;}
.chat_input {-webkit-appearance: none;display:inline-block; height:31px;width:333px; padding:0 10px 0; border:1px solid #d6d6d6; background-color:#ffffff; font-size:11px; color:#333333; line-height:31px;border-radius: 3px;vertical-align:middle}


    .st_money {
        font-family:Tahoma;color:#fff;font-size:0.7rem;
        border:1px solid #333;width:100%;text-align:center;
        background:linear-gradient( to bottom, #555, #444 );height:32px;cursor:pointer;
    }
    .st_money:hover {

        background:linear-gradient( to bottom, #444, #555 );
    }

    .vv_msg {
        font-family: 'Nanum Gothic', sans-serif;
        color:#333;font-size:12px;line-height:24px;
    }
    .vv_nick {
        font-family: 'Nanum Gothic', sans-serif;
        color:#333333;font-size:12px;line-height:24px;font-weight:bold;
    }
    .vv_info {
         font-family:Tahoma;color:#808080;font-size:12px;
    }
    .vv_notice {
         font-family: 'Nanum Gothic', sans-serif;font-weight:bold;height:28px;line-height:28px;
         color:#000000;font-size:12px;
    }
    .vv_alert {
         font-family:Tahoma;color:#f35632;font-size:12px;
    }
    .v_short0 {
         font-family:Tahoma;color:#fa7661;font-size:0.7rem;
    }
    .v_short {
         font-family:Tahoma;color:#ff4628;font-size:0.7rem;
    }
   


    .v_short_order_btn {
        height:26px;
        font-size:0.8rem;
        font-family:Tahoma;color:#fa7661;font-size:0.8rem;cursor:pointer;
        border-bottom:1px solid #3d211c;
        
    }
        .v_short_order_btn:hover {
            color:#4fff08;
        }


    .v_long_order_btn {
        height:26px;
        font-size:0.8rem;
        font-family:Tahoma;color:#6da0fd;font-size:0.8rem;cursor:pointer;
        border-bottom:1px solid #3d211c;
      
    }

    .v_long_order_btn:hover {
        color:#4fff08;
    }



    .v_long {
         font-family:Tahoma;color:#317aff;font-size:0.7rem;
    }
    .v_long0 {
         font-family:Tahoma;color:#6da0fd;font-size:0.7rem;
    }


   .v_none {
         font-family:Tahoma;color:#eee;font-size:0.7rem;border-bottom:1px solid #3d211c;padding-right:5px;padding-left:5px;height:26px;
    }
   .v_none1 {
         font-family:Tahoma;color:#aaa;font-size:0.7rem;border-bottom:1px solid #3d211c;padding-right:5px;padding-left:5px;height:26px;
    }




    .btn_buy {
         font-family:Tahoma;color:#fff;background:linear-gradient( to bottom, #6da0fd, #005aff );border:1px solid #111;font-size:0.8rem;cursor:pointer;
    }
    .btn_buy:hover {
         background:linear-gradient( to bottom, #005aff, #6da0fd );
    }
    .btn_sell {
         font-family:Tahoma;color:#fff;background:linear-gradient( to bottom, #fe6f58, #ff4122 );border:1px solid #111;font-size:0.8rem;cursor:pointer;
    }
    .btn_sell:hover {
         background:linear-gradient( to bottom, #ff4122, #fe6f58 );
    }

    .btn_stop {
         font-family:Tahoma;color:#fff;background:linear-gradient( to bottom, #999, #555 );border:1px solid #111;font-size:0.8rem;height:45px;width:100%;cursor:pointer;
    }
    .btn_stop:hover {
         background:linear-gradient( to bottom, #ff0000, #ff4628 );
    }

    .v_orders_sell {
        font-family:Tahoma;color:#fff;
        font-size:0.7rem;
        background:linear-gradient( to bottom, #fe6f58, #ff4122 );
     
        height:28px;
        
    }


    .v_orders_sell_btn {
        font-family:Tahoma;color:#fff;
        font-size:0.7rem;
        background:linear-gradient( to bottom, #fe6f58, #ff4122 );
     
        height:28px;
        cursor:pointer;
        
    }

    .v_orders_sell_btn:hover {
        color:#4fff08;
        
    }

    .v_orders_buy {
        font-family:Tahoma;color:#fff;
        font-size:0.7rem;
        background:linear-gradient( to bottom, #6da0fd, #005aff );
       
        height:28px;
       cursor:pointer;
    }
    .v_orders_buy_btn {
        font-family:Tahoma;color:#fff;
        font-size:0.7rem;
        background:linear-gradient( to bottom, #6da0fd, #005aff );
       
        height:28px;
       
    }

    .v_orders_buy_btn:hover {
        color:#4fff08;
        
    }





    .btn_input_half {
        font-family:Tahoma;color:#fff;background:#333;width:40px;height:24px;text-align:center;border:1px solid #111;
        font-size:0.8rem;line-height:24px;
    }



    .btn_input {
        font-family:Tahoma;color:#fff;background:#333;width:100%;height:40px;text-align:center;border:1px solid #111;
        font-size:1rem;line-height:50px;
    }
    .scroll_buy {
        scrollbar-highlight-color: #FFFFFF;
        scrollbar-3dlight-color: #B58E63;
        scrollbar-face-color: #F2ECE6;
        scrollbar-shadow-color: #B58E63;
        scrollbar-darkshadow-color: white;
        scrollbar-track-color: #FFFFFF;
        scrollbar-arrow-color: #B58E63;
    }


    .btn_ac {
        color:#fff;cursor:pointer;
    }

    .btn_ac:hover {
            color:#4fff08;
    }

    .btn_ac_buy_price {
        color:#fff;cursor:pointer;
    }

    .btn_ac_buy_price:hover {
            color:#4fff08;
    }

   .btn_ac_cancel {
       background:linear-gradient( to bottom, #ccc, #555 );
       border:1px solid #111;
        color:#ccc;cursor:pointer;
        width:100%;
        height:30px;
    }

    .btn_ac_cancel:hover {
            color:#fff;
    }
</style>



<script language="javascript">

    var am = 0;

    var g_vol = 0.3;

    var obj_alert = document.createElement("audio");
    obj_alert.src = "./sound/alert.mp3";
    obj_alert.volume = 0.30;
    obj_alert.autoPlay = false;
    obj_alert.preLoad = true;



    var obj_ok = document.createElement("audio");
    obj_ok.src = "./sound/ok.mp3";
    obj_ok.volume = 0.30;
    obj_ok.autoPlay = false;
    obj_ok.preLoad = true;



    var obj_error = document.createElement("audio");
    obj_error.src = "./sound/error.mp3";
    obj_error.volume = 0.30;
    obj_error.autoPlay = false;
    obj_error.preLoad = true;


    var obj_typing = document.createElement("audio");
    obj_typing.src = "./sound/typing.mp3";
    obj_typing.volume = 0.30;
    obj_typing.autoPlay = false;
    obj_typing.preLoad = true;


    var obj_buy = document.createElement("audio");
    obj_buy.src = "./sound/buy.mp3?12";
    obj_buy.volume = 0.30;
    obj_buy.autoPlay = false;
    obj_buy.preLoad = true;

    var obj_sell = document.createElement("audio");
    obj_sell.src = "./sound/sell.mp3";
    obj_sell.volume = 0.30;
    obj_sell.autoPlay = false;
    obj_sell.preLoad = true;

    var obj_ac = document.createElement("audio");
    obj_ac.src = "./sound/click.wav";
    obj_ac.volume = 0.40;
    obj_ac.autoPlay = false;
    obj_ac.preLoad = true;



    var obj_buy_finex = document.createElement("audio");
    obj_buy_finex.src = "./sound/buy_finex.mp3";
    obj_buy_finex.volume = 0.40;
    obj_buy_finex.autoPlay = false;
    obj_buy_finex.preLoad = true;

    var obj_sell_finex = document.createElement("audio");
    obj_sell_finex.src = "./sound/sell_finex.mp3";
    obj_sell_finex.volume = 0.40;
    obj_sell_finex.autoPlay = false;
    obj_sell_finex.preLoad = true;

    function fn_google() {

        $.ajax({
            type: "POST"
        , async: true
        , url: "/include/google.asp"
        , dataType: "html"
        , timeout: 10000
        , cache: false
        , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
        , success: function (response, status, request) {

            $('#log_locate').html(response);


        }

        });


    }




    function fn_show(cnt) {
        var comma_separator_number_step = $.animateNumber.numberStepFactories.separator(',');
        $('#tot_usd').animateNumber({ number: cnt, numberStep: comma_separator_number_step }, 10000);
    }

    function fn_show_number(target, cnt) {
        var comma_separator_number_step = $.animateNumber.numberStepFactories.separator(',');
        $(target).animateNumber({ number: cnt, numberStep: comma_separator_number_step }, 10000);
    }



    var view_ratio = 5;


    var hc = 0;
    var hq = 0;

    var min_effect = 0;


    function numberWithCommas(n) {
        var parts = n.toString().split(".");
        return parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",") + (parts[1] ? "." + parts[1] : "");
    }

    function fn_trade_1() {

        $.ajax({
            type: "POST"
        , async: true
        , url: "ajax_mex_trade_1m.asp"
        , dataType: "json"
        , timeout: 5000
        , cache: false
        , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
        , success: function (response, status, request) {

            var tot = 0;
            tot = parseFloat(response.short) + parseFloat(response.long);


            /*
            if (parseInt(tot) >= 5000000) {


                if (min_effect == 0) {
                   
                    if ($('#sound_effect').is(":checked")) {
                        obj_tet.play();
                        min_effect = 1;
                        
                    }
                }

            } else {
                min_effect = 0;
                obj_tet.pause();

            }
            */
            if (view_ratio == 1) {

                $('#vt_short').html(numberWithCommas(response.short));

                $('#vt_long').html(numberWithCommas(response.long));



                var av1 = 100 - parseFloat(response.short / tot * 100);
                var av2 = parseFloat(response.long / tot * 100);

                $('#vtp_short').html(parseFloat(response.short / tot * 100).toFixed(2) + ' %')
                $('#vtp_long').html(parseFloat(av2).toFixed(2) + ' %')

            }

        }
        });


    }




    var timer04;
    var timer05;

    function fn_tcs(tcs) {
  
        view_ratio = tcs;
        obj_ac.play();
  
     

    }

    

    function fn_trade_tx() {



        $.ajax({
            type: "POST"
        , async: true
        , url: "mex_trade_usd.asp"
        , dataType: "json"
        , timeout: 10000
        , cache: false
        , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
        , success: function (response, status, request) {


            g_5m_buy = response.b5;
            g_5m_sell = response.s5;

            g_5m_tot = parseFloat(response.b5) + parseFloat(response.s5);
            g_5m_tot = parseInt(g_5m_tot * 0.02);

            if (view_ratio != 1) {

                if (view_ratio == 5) {

                    b = response.b5;
                    s = response.s5;
                } else if (view_ratio == 10) {

                    b = response.b10;
                    s = response.s10;
                } else if (view_ratio == 30) {

                    b = response.b30;
                    s = response.s30;
                } else if (view_ratio == 60) {

                    b = response.b60;
                    s = response.s60;
                } else if (view_ratio == 120) {

                    b = response.b120;
                    s = response.s120;
                } else if (view_ratio == 240) {

                    b = response.b240;
                    s = response.s240;
                } else {
                    b = response.b5;
                    s = response.s5;
                }


                $('#vt_short').html(numberWithCommas(s));
                $('#vt_long').html(numberWithCommas(b));

                var tot = 0;
                tot = parseFloat(s) + parseFloat(b);

                var av1 = 100 - parseFloat(s / tot * 100);
                var av2 = parseFloat(b / tot * 100);

                $('#vtp_short').html(parseFloat(s / tot * 100).toFixed(2) + ' %')
                $('#vtp_long').html(parseFloat(av2).toFixed(2) + ' %')

            }

        }
        });


    }

    var lang = 'KR';
    var mode = '2';

    function fn_set_lang(lang) {

        if (lang == 1) {
            window.open('?lang=EN&mode=2', '_self');
        } else {
            window.open('?lang=KR&mode=2', '_self');
        }
    }

    function fn_set_mode() {
        

        if (mode == 1) {
            window.open('?lang='+lang +'&mode=2', '_self');
        } else {
            window.open('?lang=' + lang + '&mode=1', '_self');
        }
    }

    function fn_set_1s() {

    }


</script>


</head>


<body style="font-family:Arial;font-size:0.9rem;background:#333;">
    <center>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td colspan="2" height="50" align="center" style="color:#fff;font-size:2rem;background:#424444;">

	

	    </td>
    </tr>
</table>
<table width="100%" border="0" cellpadding="0" cellspacing="0"  style="border:1px solid #333;border-collapse:collapse;font-size:0.9rem;" >


<tr>
	<td colspan="2" style="background:linear-gradient( to bottom, #777, #424444 );">


		



<style>
body { margin: 0; }


.sidenav {
    height: 100%;
    width: 0;
    position: fixed;
    z-index: 100;
    top: 30px;
    left: 0;
    background-color: #111;
    overflow-x: hidden;
    transition: 0.5s;
    padding-top: 20px;
}

.sidenav a {
    padding: 8px 8px 8px 32px;
    text-decoration: none;
    font-size: 1.6rem;
    color: #818181;
    display: block;
    transition: 0.3s;
}

.sidenav a:hover {
    color: #f1f1f1;
}

.sidenav .closebtn {
    position: absolute;
    top: 0;
    right: 25px;
    font-size: 40px;
    margin-left: 50px;
}

@media screen and (max-height: 400px) {
  .sidenav {padding-top: 15px;}
  .sidenav a {font-size: 1.8rem;}
}

#fixed-menu {
  width: 100%;
  background-color: #ffffff;
  position: fixed;
  top: 0px;
  left: 0px;
  z-index:99999;
}


#main-content {
  width: 100%;
  margin-top: 152px;
}



.sidenav_cart {
    height: 100%;
    width: 0;
    position: fixed;
    z-index: 200;
    top: 30px;
    right: 0;
    background-color: #111;
    overflow-x: hidden;
    transition: 0.5s;
   
}

.sidenav_cart a {
    padding: 8px 8px 8px 32px;
    text-decoration: none;
    font-size: 1.6rem;
    color: #818181;
    display: block;
    transition: 0.3s;
}

.sidenav_cart a:hover {
    color: #f1f1f1;
}

.sidenav_cart .closebtn {
    position: absolute;
    top: 0;
    right: 25px;
    font-size: 40px;
    margin-left: 50px;
}

@media screen and (max-height: 400px) {
  .sidenav_cart {padding-top: 15px;}
  .sidenav_cart a {font-size: 1.8rem;}
}

</style>


<script>
var side_view = 0;
var side_view2  = 0;
function openNav() {


    if ( side_view == 0){
        document.getElementById("mySidenav").style.width = "400px";
        side_view = 1;
    }else{
        document.getElementById("mySidenav").style.width = "0px";
        side_view = 0;
    }
}


function openCart() {


    if ( side_view2 == 0){
        document.getElementById("mySidenav_cart").style.width = "400px";
        side_view2 = 1;
    }else{
        document.getElementById("mySidenav_cart").style.width = "0px";
        side_view2 = 0;
    }

}



</script>
<style>
.cm_rqs{background:linear-gradient( to bottom, #efefef, #ccc );color:#000;width:100px;height:20px;text-align:center;font-size:0.8rem;border-radius:5px;border:1px solid #ccc}

.cm_rqs:hover {background:linear-gradient( to bottom, #1e2635, #0c1524 );color:#fff}



</style>

<div id="fixed-menu">

            <table  border="0" cellspacing="0" cellpadding="0" width="100%" style="background:linear-gradient( to bottom, #444, #000 )">
                <tr>
     
                    <td width="15%" align="left" onclick="openNav();"  height="50"  style="font-size:2rem;color:#fff;padding-left:10px;" id="my_menu" >
                        <i class="fa fa-fw fa-bars"></i>
                        
           
                        
                    </td>

                    <td width="15%" align="right"    style="font-size:2rem;color:#fff;padding-right:10px;" onclick="openCart();"  id="vm_cart" >
     
                        <i class="fa fa-fw fa-check-square-o"></i> 
                    </td>
      
                </tr>
                <tr>
                    <td style="border-bottom:4px solid #333" colspan="4"></td>
                </tr>

            </table>


		
</div>


<div id="mySidenav" class="sidenav">

<div id="cssmenu">



  <ul>
      <li><a href="https://coinfarm.online/"> Coinfarm HomePage</a></li>
  </ul>
  

    <ul>

     <li ><a href="/XBTUSDM/?lang=KR"><i class="fa fa-fw fa-rocket"></i> API XBT</a></li>
    </ul>
    <ul>

      <li><a href="/ETHUSDM/?lang=KR"><i class="fa fa-fw fa-rocket"></i> API ETH</a></li>
  </ul>
    <ul>

      <li><a href="/XRPH19M/?lang=KR"><i class="fa fa-fw fa-rocket"></i> API XRP</a></li>
  </ul>
    <ul>

      <li><a href="/BCHH19M/?lang=KR"><i class="fa fa-fw fa-rocket"></i> API BCH</a></li>
  </ul>
    <ul>

      <li><a href="/help/?lang=KR"><i class="fa fa-fw fa-rocket"></i> Help Coinfarm API</a></li>
  </ul>
    <ul>

      <li><a href="?lang=KR"><img src='/n4.png?' width="26" style="vertical-align:middle;"  /> ???</a></li>
  </ul>
    <ul>

      <li><a href="?lang=EN"><img src='/n1.png?' width="26" style="vertical-align:middle;"  />  English</a></li>
  </ul>
</div>

  </div>


<div id="mySidenav_cart" class="sidenav_cart">

<table width="100%" border="0" cellpadding="0" cellspacing="0" style="">
    <tr bgcolor="89443a">
        <td  width="25%" style="color:#ff6e6a;font-size:0.8rem;text-align:center" height="30">Maker Fee</td>
        <td width="25%" style="color:#efefef;font-size:0.8rem;text-align:center"><span id="my_fee_maker"></span></td>
        <td width="25%" style="color:#ff6e6a;font-size:0.8rem;text-align:center">Taker Fee</td>
        <td width="25%" style="color:#efefef;font-size:0.8rem;text-align:center"><span id="my_fee_taker"></span></td>
    </tr>


    </table>



	                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
 	                        <tr>
  	                        <td valign="top" width="100%" style="border:1px solid #333;padding:5px;" height="100" id="position_style">
                                <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                    <tr>
                                        

                                   
                                        <td width="20%" style="padding:5px;background:#555;">
                                            <table width="100%" border="0" cellpadding="0" cellspacing="0" style="color:#efefef;font-size:0.7rem;">
                                
                                                <tr>
                                                    <td align="center"  height="24"><i class="fa fa-fw fa-bitcoin"></i> My balance </td>
                                                    <td align="center"  height="24">Position leverage</td>
                                                </tr>
                                                <tr>
                                                    <td align="center" height="30"  style="border:1px solid #333;border-radius:4px;background:#111;color:#4fff08;"><div id="my_balance"></div></td>
                                                    <td align="center" height="30"  style="border:1px solid #333;border-radius:4px;background:#111;color:#6da0fd;"><div id="position_leverage"></div></td>
                                                     
                                                </tr>
                                                <tr>
                                                    <td align="center"  height="24"><i class="fa fa-fw fa-bitcoin"></i> Available Margin </td>
                                                    <td align="center"  height="24"><i class="fa fa-fw fa-bitcoin"></i> Margin Balance</td>
                                                </tr>
                                                <tr>
                                                    <td align="center" height="30" style="border:1px solid #333;border-radius:4px;background:#111;"><div id="my_margin_Available"></div></td>
                                                    <td align="center" height="30" style="border:1px solid #333;border-radius:4px;background:#111;"><div id="my_margin_balance"></div></td>
                                                </tr>
                                            </table>

                                        </td>
                                        </tr>
                                    <tr>
                                    
                                        <td width="100%">


                                            <table width="100%" border="0" cellpadding="0" cellspacing="0" style="color:#efefef;font-size:0.6rem;">
                                                <tr>
                                                    
                                                    <td align="center" width="25%">?? $</td>
                                                    <td align="center" width="25%" height="24">????</td>
                                                    <td align="center" width="25%">????</td>
                                                    <td align="center" width="25%">????</td>
                                                </tr>
                                                <tr>
                                                    <td align="center" height="30" style="border:1px solid #333;border-radius:4px;background:#111;" onclick="fn_set_sell_price();" class="btn_ac"><div id="pos_size"></div></td>
                                                    <td align="center"  style="border:1px solid #333;border-radius:4px;background:#111;color:#4fff08;"><div id="pos_price"></div></td>
                                                    
                                                    <td align="center"  style="border:1px solid #333;border-radius:4px;background:#111;"><div id="pos_market_price"></div></td>
                                                    
                                                    <td align="center"  style="border:1px solid #333;border-radius:4px;background:#111;color:#ff6e6a"><div id="pos_liq"></div></td>
                                                </tr>
                                                <tr>
                                                    <td align="center" width="25%"  height="24"> ??</td>
                                                    <td align="center" width="25%">??? USD</td>
                                                    <td align="center" width="25%"> ??? BTC</td>
                                                    <td align="center" width="25%"> ?????</td>
                                                    
                                                </tr>
                                                <tr>
                                                    <td align="center" height="30" style="border:1px solid #333;border-radius:4px;background:#111;"><div id="pos_btc"></div></td>
                                                    <td align="center"  style="border:1px solid #333;border-radius:4px;background:#111;"><div id="pos_profit"></div></td>
                                                    
                                                    
                                                    <td align="center"  style="border:1px solid #333;border-radius:4px;background:#111;"><div id="pos_profit_btc"></div></td>
                                                    <td align="center"  style="border:1px solid #333;border-radius:4px;background:#111;"><div id="pos_pnl"></div></td>
                                                </tr>
                                            </table>


                                        </td>
                                        
                                    </tr>
                                    <tr>
                                        <td style="padding-top:5px;">
                                                  <table width="100%" border="0" cellpadding="0" cellspacing="0" >
   
                                                      <tr>
                                                
                                                         
                                                          <td width="100%"  >
                                                           
                                                              <input type="button" value="??? ??" class="btn_stop" onclick="fn_mex_order_close_position_proc()" />
                                                          </td>
                                                      </tr>
                                                      </table>
                                        </td>
                                    </tr>


                                </table>


                            </td>
                        </tr>
                        </table>
	                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
 	                        <tr>
  	                        <td valign="top" width="100%" style="border:1px solid #333;padding:5px;" height="100" >

                                            <table width="100%" border="0" cellpadding="0" cellspacing="0" style="color:#efefef;font-size:0.6rem;border:1px solid #555;">
                                                <tr>
                                                    
                                                    
                                                    
                                                    <td align="center" width="25%">LONGS ??</td>
                                                    <td align="center" width="25%">?????</td>
                                                    <td align="center" width="25%">??? ???</td>
                                                    <td align="center" width="25%" height="24">??? ???</td>
                                                </tr>
                                                <tr>
                                                    <td align="center"  style="border:1px solid #333;border-radius:4px;background:#111;"><div id="pab_1"></div></td>
                                                    <td align="center"  style="border:1px solid #333;border-radius:4px;background:#111;"><div id="pab_2"></div></td>
                                                    <td align="center" height="30" style="border:1px solid #333;border-radius:4px;background:#111;color:#4fff08;" ><div id="pab_3"></div></td>
                                                    <td align="center"  style="border:1px solid #333;border-radius:4px;background:#111;color:#ff6e6a"><div id="pab_4"></div></td>
                                                    
                                                    
                                                    
                                                    
                                                </tr>
                                               
                                            </table>

                                            <table width="100%" border="0" cellpadding="0" cellspacing="0" style="color:#efefef;font-size:0.6rem;border:1px solid #555;">
                                                <tr>
                                                    
                                                    <td align="center" width="25%" height="24" >SHORTS ??</td>
                                                    <td align="center" width="25%">?????</td>
                                                    <td align="center" width="25%">??? ???</td>
                                                    <td align="center" width="25%">??? ???</td>
                                                </tr>
                                                <tr>
                                                    <td align="center" height="30" style="border:1px solid #333;border-radius:4px;background:#111;" ><div id="pas_1"></div></td>
                                                    <td align="center"  style="border:1px solid #333;border-radius:4px;background:#111;"><div id="pas_2"></div></td>
                                                    
                                                    <td align="center"  style="border:1px solid #333;border-radius:4px;background:#111;color:#4fff08;"><div id="pas_3"></div></td>
                                                    
                                                    <td align="center"  style="border:1px solid #333;border-radius:4px;background:#111;color:#ff6e6a"><div id="pas_4"></div></td>
                                                </tr>
                                                
                                            </table>
                    </td>
                                 </tr>
                            </table>



  
<table width="400" border="0" cellpadding="0" cellspacing="0"  style="border:2px solid #555;border-collapse:collapse;font-size:0.9rem;" >


<tr>


	<td colspan="2" width="100%">


			<table width="100%" border="0" cellpadding="0" cellspacing="0" style="background:#333;">
			<tr>

     
		         

		            <td   align="center" style="color:#ccc;font-size:1rem;padding:10px;" width="5%">
                    <i class="fa fa-fw fa-bell-slash"></i>
                    </td>

    		        <td  width="90%" align="center" style="color:#fff;font-size:1rem;">
                            <input type="range" id="soundVolume" min="0.0" max="1.0" step="0.1" value="0.3" oninput="javascript:fn_vol(this.value);" style="width:100%"/>
    		        </td>
		            <td   align="center" style="color:#ccc;font-size:1rem;padding:10px;" width="5%">
                         <i class="fa fa-fw fa-bell"></i>
                    </td>


	            </tr>
                <tr>

		         
		            
		            <td   style="color:#fff;font-size:0.8rem;padding:10px;" width="100%" colspan="3">
                        
                        <input type="checkbox" id="sound_effect"   style="width:20px;height:20px" value="1"    checked="checked"   /> ???? ??
		           
                    <label for="sound">  <input type="checkbox" id="sound_sell"   style="width:20px;height:20px" value="1"  checked="checked"    /> ??? ??</label>

                    <select name="vol_buy" style="font-size:0.9rem;height:30px" onchange="fn_size_sell(this.value);">
                        <option value="10000"  >10,000</option>
                        <option value="50000"  >50,000</option>
                        <option value="100000" selected >100,000</option>
                        <option value="300000">300,000</option>
                        <option value="500000">500,000</option>
                        <option value="1000000">1,000,000</option>
                        <option value="2000000">2,000,000</option>
                        <option value="3000000">3,000,000</option>
                         <option value="3000000">4,000,000</option>
                        <option value="5000000">5,000,000</option>
               
                    </select>
		            </td>


                </tr>
                <tr>
                    <td   align="left" style="color:#fff;font-size:0.8rem;padding:10px;" width="100%" colspan="3"><input type="checkbox" id="sound_effect_finex" checked="checked"    style="width:20px;height:20px" value="1"   onchange="fn_set_1s();"    /> BitFinex 10 btc
		                                                    </td>
                </tr>

	        </table>

     <table width="100%" border="0" cellpadding="0" cellspacing="0" style="border:2px solid #555;background:#333;">
                                                      <tr>
                                                          <td width="50%"  style="padding:5px;color:#aaa;font-size:0.9rem;" align="center" height="30" colspan="2">????
                                                              
                                                          </td>
                                                        
                                                      </tr>
                                                    <tr>
                                                        <td colspan="2" style="vertical-align:middle;font-size:0.8rem;color:#fff;background:#777;" height="30">
                                                                          
                                                            <input type="checkbox"  id="btn_overload" style="width:20px;height:20px;"  />????,??????
                                                                          
                                                        </td>
                                                    </tr>   
                                                    <tr>
                                                        <td colspan="2" style="vertical-align:middle;font-size:0.8rem;color:#fff;background:#777;" height="30">
                                                                          
                                                            <input type="checkbox"  id="btn_order_same" style="width:20px;height:20px;"   />????? ??? XBT?? ????
                                                                          
                                                        </td>
                                                    </tr>   
                                                    <tr>
                                                        <td colspan="2" style="vertical-align:middle;font-size:0.8rem;color:#fff;background:#777;" height="30">
                                                                          
                                                             <input type="checkbox"  id="api_shared" style="width:20px;height:20px;" checked  />API ??? ???? ????
                                                                          
                                                        </td>
                                                    </tr>   
                                                    <tr>
                                                        <td colspan="2" style="vertical-align:middle;font-size:0.8rem;color:#fff;background:#777;" height="30">
                                                                          
                                                             <input type="checkbox"  id="view_market" style="width:20px;height:20px;" onclick="fn_set_btn_market();"  />???? ???
                                                                          
                                                        </td>
                                                    </tr>   
                                                    <tr>
                                                        <td colspan="2" style="vertical-align:middle;font-size:0.8rem;color:#fff;background:#777;" height="30">
                                                                          
                                                             <input type="checkbox"  id="view_chart" style="width:20px;height:20px;" onclick="fn_set_btn_chart();"  />Chart View
                                                                          
                                                        </td>
                                                    </tr>   
                                                    <tr>
                                                        <td colspan="2" style="vertical-align:middle;font-size:0.8rem;color:#fff;background:#777;" height="30">
                                                                          
                                                             <input type="checkbox"  id="api_hoga_double" style="width:20px;height:20px;" onclick="fn_set_btn_chart();"  />?????? ????
                                                                          
                                                        </td>
                                                    </tr>   

         
                                                      </table>
 
                            <table width="100%" border="0" cellpadding="0" cellspacing="0" style="border:2px solid #555;background:#333;">
                                                    <tr>
                                                        <td colspan="2" style="vertical-align:middle;font-size:0.8rem;color:#fff;background:#777;padding-left:10px;" height="30">
                                                                          
                                                             API License Expiration Date with Btc balance
                                                                          
                                                        </td>
                                                    </tr>   
                                                    <tr>
                                                        <td colspan="2" style="vertical-align:middle;font-size:0.8rem;color:#fff;background:#777;padding-left:10px;" height="30">
                                                                          
                                                             <span id="my_license"></span>
                                                                          
                                                        </td>
                                                    </tr>  
                                                    <tr>
                                                        <td colspan="2" style="vertical-align:middle;font-size:0.8rem;color:#fff;background:#777;padding-left:10px;" height="30">
                                                                          
                                                             <span id="api_version"></span>
                                                                          
                                                        </td>
                                                    </tr>  
        </table>
                                                 
</td>
</tr>

</table>


</div>



	</td>
</tr>    

</table>
<div id="api_bg" style="border:2px solid #111;width:400px">

    <table width="100%" border="0" cellspacing="0" cellpadding="0" >

            <tr>
                <td width="100%" style="padding:0px;">

	                    <table width="100%" border="0" cellpadding="0" cellspacing="0">

                                <tr>
                                <td align="center" width="100%" style="background:linear-gradient( to bottom, #999, #555 );padding:5px;">




                                    <table  border="0" cellpadding="0" cellspacing="0" width="100%">
                                        <tr>

                                            <td width="15%" align="center" class="v_long"  style="border:1px solid #333;border-radius:4px 0px 0px 4px;background:#333;font-size:0.6rem;" id="lamp_buy">
                                                $ <span id="vt_long"></span>

                                            </td>
                                            <td width="13%" align="center" style="border:1px solid #333;color:#fff;border-right:none;font-size:0.8rem;"><span id="vtp_long"></span></td>
                                            <td width="24%" align="center" style="border:1px solid #333;">

                    <select name="tcs" id="sc_tcs" onchange="fn_tcs(this.value)" style="height:40px;width:100%;background:linear-gradient( to bottom, #fff, #777);color:#333;border:none;text-align:center;font-size:0.7rem;">


	                    <option value="5" selected > BitMex ETH/USD</option>
	                    <option value="10"  > BitMex XBT/USD </option>


                    </select>
                                            </td>
                                            <td width="13%" align="center" style="border:1px solid #333;color:#fff;border-left:0px;font-size:0.8rem;"><span id="vtp_short"></span></td>
                                            <td width="15%" align="center"  class="v_short" style="border:1px solid #333;border-radius:0 4px 4px 0;background:#333;font-size:0.6rem;" id="lamp_sell">
                                               $ <span id="vt_short"></span>

                                            </td>
                                        </tr>

                                        </table>
                                </td>

                            </tr>
                            <tr>

                                        </tr>

                                        </table>
                                </td>
                            </tr>
                            </table>
                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                        <tr>
                            <td>
                                <div id="vm_chart";">
<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<div class="tradingview-widget-container">

  
              <script type="text/javascript">
                  new TradingView.widget(
                  {
                      "width": 400,
                      "height": 300,
                      "symbol": "BITMEX:ETHUSD",
                      "interval": "60",
                      "timezone": "Etc/UTC",
                      "theme": "Dark",
                      "style": "1",
                      "locale": "en",
                      "toolbar_bg": "#333",
                      "enable_publishing": false,
                      "hide_legend": true,
                      "save_image": false,
			"hide_side_toolbar": false,
                      "studies": [
                          "BB@tv-basicstudies"
                      ],
                      "container_id": "tradingview_5e52b"
                  }
                  );
              </script>
            </div>                     
</div>
                          
                            </td>

                        </tr>
                            <tr>
                                <td align="center" width="100%" style="background:#333;border-left:1px solid #555;border-right:1px solid #555;background:#333;">



                                      


<table  border="0" cellpadding="0" cellspacing="0" width="100%">
                                          <tr>

                                            <td width="100%" align="center" valign="top" bgcolor="#111" colspan="6">
                                        
                                              
                                                    <table  border="0" cellpadding="0" cellspacing="0" width="100%" >
                                                        <tr>
                                                            <td width="15%" align="center" style="color:#fff;padding:5px;font-size:0.8rem;" height="50" >
                                                                <span id="tot_buy_percent"></span>
                                                                </td>
                                                            <td width="20%" align="center" style="color:#fff;padding:5px;" height="50">
                                                                <table  border="0" cellpadding="0" cellspacing="0" width="100%" style="font-size:0.7rem;padding-top:5px;">
                                                                    <tr>
                                                                        <td height="20" align="center"><span style="color:#ccc;">Buy Orders</span></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td height="20" class="v_long"  align="center">$ <span id="order_tot_buy"></span></td>
                                                                    </tr>
                                                                    </table>
                                                            </td>
                                            
                                                            <td width="30%" align="center" style="color:#fff;padding:5px;font-size:1rem;" height="50">
                                                             
                                                                <div id="xbt_last" style=""></div>
                                                            </td>
                                                            <td width="20%" align="center" style="color:#fff;padding:5px;font-size:0.7rem;" height="50">

                                                                <table  border="0" cellpadding="0" cellspacing="0" width="100%" style="font-size:0.7rem;padding-top:5px;">
                                                                    <tr>
                                                                        <td height="20" align="center"><span style="color:#ccc;">Sell Orders</span></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td height="20" class="v_short" align="center">$ <span id="order_tot_sell"></span></td>
                                                                    </tr>
                                                                    </table>
                                                            </td>
                                                            <td width="15%" align="center" style="color:#fff;padding:5px;font-size:0.8rem;" height="50">
                                                                <span id="tot_sell_percent"></span>
                                                            </td>
                                                        </tr>

                                                        </table>
	                                
                                                       

                                              </td>
                                            </tr>

</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0" style="background:#131722;">
                                        <tr>
                         

                                            <td width="50%" height="260"  align="center" style="color:#aaa;font-size:0.8rem;" colspan="2">
                                                
                                                    <div id="order_bid">

                                                
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>
                                                            <td id='bid_0_1' class='v_none1' width="33%" ></td>
                                                            <td id='bid_0_2' class='v_none' width="33%" align="right" style="padding-right:10px;"  ></td>
                                                            <td  class='v_long_order_btn'  width="34%"  onclick="fn_set_buy_order_price(0);" >
                                                                <div id='bid_0_3' style="position:absolute;z-index:10;padding-left:14px;margin-top:5px;"  ></div>
                                                                  <div class="w3-blue" >
                                                                    <div class="w3-white" style="height:26px;width:0%" id="bid_0_4"></div>
                                                                  </div>
                                                            </td>
                                                      
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>
                                                            <td id='bid_1_1' class='v_none1' width="33%" ></td>
                                                            <td id='bid_1_2' class='v_none' width="33%" align="right" style="padding-right:10px;"  ></td>
                                                            <td  class='v_long_order_btn'  width="34%"  onclick="fn_set_buy_order_price(1);" >
                                                                <div id='bid_1_3' style="position:absolute;z-index:10;padding-left:14px;margin-top:5px;"  ></div>
                                                                  <div class="w3-blue" >
                                                                    <div class="w3-white" style="height:26px;width:0%" id="bid_1_4"></div>
                                                                  </div>
                                                            </td>
                                                      
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>
                                                            <td id='bid_2_1' class='v_none1' width="33%" ></td>
                                                            <td id='bid_2_2' class='v_none' width="33%" align="right" style="padding-right:10px;"  ></td>
                                                            <td  class='v_long_order_btn'  width="34%"  onclick="fn_set_buy_order_price(2);" >
                                                                <div id='bid_2_3' style="position:absolute;z-index:10;padding-left:14px;margin-top:5px;"  ></div>
                                                                  <div class="w3-blue" >
                                                                    <div class="w3-white" style="height:26px;width:0%" id="bid_2_4"></div>
                                                                  </div>
                                                            </td>
                                                      
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>
                                                            <td id='bid_3_1' class='v_none1' width="33%" ></td>
                                                            <td id='bid_3_2' class='v_none' width="33%" align="right" style="padding-right:10px;"  ></td>
                                                            <td  class='v_long_order_btn'  width="34%"  onclick="fn_set_buy_order_price(3);" >
                                                                <div id='bid_3_3' style="position:absolute;z-index:10;padding-left:14px;margin-top:5px;"  ></div>
                                                                  <div class="w3-blue" >
                                                                    <div class="w3-white" style="height:26px;width:0%" id="bid_3_4"></div>
                                                                  </div>
                                                            </td>
                                                      
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>
                                                            <td id='bid_4_1' class='v_none1' width="33%" ></td>
                                                            <td id='bid_4_2' class='v_none' width="33%" align="right" style="padding-right:10px;"  ></td>
                                                            <td  class='v_long_order_btn'  width="34%"  onclick="fn_set_buy_order_price(4);" >
                                                                <div id='bid_4_3' style="position:absolute;z-index:10;padding-left:14px;margin-top:5px;"  ></div>
                                                                  <div class="w3-blue" >
                                                                    <div class="w3-white" style="height:26px;width:0%" id="bid_4_4"></div>
                                                                  </div>
                                                            </td>
                                                      
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>
                                                            <td id='bid_5_1' class='v_none1' width="33%" ></td>
                                                            <td id='bid_5_2' class='v_none' width="33%" align="right" style="padding-right:10px;"  ></td>
                                                            <td  class='v_long_order_btn'  width="34%"  onclick="fn_set_buy_order_price(5);" >
                                                                <div id='bid_5_3' style="position:absolute;z-index:10;padding-left:14px;margin-top:5px;"  ></div>
                                                                  <div class="w3-blue" >
                                                                    <div class="w3-white" style="height:26px;width:0%" id="bid_5_4"></div>
                                                                  </div>
                                                            </td>
                                                      
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>
                                                            <td id='bid_6_1' class='v_none1' width="33%" ></td>
                                                            <td id='bid_6_2' class='v_none' width="33%" align="right" style="padding-right:10px;"  ></td>
                                                            <td  class='v_long_order_btn'  width="34%"  onclick="fn_set_buy_order_price(6);" >
                                                                <div id='bid_6_3' style="position:absolute;z-index:10;padding-left:14px;margin-top:5px;"  ></div>
                                                                  <div class="w3-blue" >
                                                                    <div class="w3-white" style="height:26px;width:0%" id="bid_6_4"></div>
                                                                  </div>
                                                            </td>
                                                      
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>
                                                            <td id='bid_7_1' class='v_none1' width="33%" ></td>
                                                            <td id='bid_7_2' class='v_none' width="33%" align="right" style="padding-right:10px;"  ></td>
                                                            <td  class='v_long_order_btn'  width="34%"  onclick="fn_set_buy_order_price(7);" >
                                                                <div id='bid_7_3' style="position:absolute;z-index:10;padding-left:14px;margin-top:5px;"  ></div>
                                                                  <div class="w3-blue" >
                                                                    <div class="w3-white" style="height:26px;width:0%" id="bid_7_4"></div>
                                                                  </div>
                                                            </td>
                                                      
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>
                                                            <td id='bid_8_1' class='v_none1' width="33%" ></td>
                                                            <td id='bid_8_2' class='v_none' width="33%" align="right" style="padding-right:10px;"  ></td>
                                                            <td  class='v_long_order_btn'  width="34%"  onclick="fn_set_buy_order_price(8);" >
                                                                <div id='bid_8_3' style="position:absolute;z-index:10;padding-left:14px;margin-top:5px;"  ></div>
                                                                  <div class="w3-blue" >
                                                                    <div class="w3-white" style="height:26px;width:0%" id="bid_8_4"></div>
                                                                  </div>
                                                            </td>
                                                      
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>
                                                            <td id='bid_9_1' class='v_none1' width="33%" ></td>
                                                            <td id='bid_9_2' class='v_none' width="33%" align="right" style="padding-right:10px;"  ></td>
                                                            <td  class='v_long_order_btn'  width="34%"  onclick="fn_set_buy_order_price(9);" >
                                                                <div id='bid_9_3' style="position:absolute;z-index:10;padding-left:14px;margin-top:5px;"  ></div>
                                                                  <div class="w3-blue" >
                                                                    <div class="w3-white" style="height:26px;width:0%" id="bid_9_4"></div>
                                                                  </div>
                                                            </td>
                                                      
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    


                                                    </div>
                                            </td>
                                              
                                            <td width="50%"  align="center" style="color:#aaa;font-size:0.8rem;" colspan="2">
                                                <div id="order_ask">

                                                
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>

                                                            <td class='v_short_order_btn' style="text-align:center" width="33%"  onclick="fn_set_sell_order_price(0);" >

                                                                <div id='ask_0_3' style="position:absolute;z-index:10;padding-left:10px;margin-top:5px;"></div>
                                                                  <div class="w3-white">
                                                                    <div class="w3-red" style="height:26px;width:0%" id="ask_0_4"></div>
                                                                  </div>


                                                            </td>
                                                            <td id='ask_0_2' class='v_none' width="33%" style="padding-left:20px;"  ></td>    
                                                            <td id='ask_0_1' class='v_none1' width="33%" ></td>
                                                                                                              
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>

                                                            <td class='v_short_order_btn' style="text-align:center" width="33%"  onclick="fn_set_sell_order_price(1);" >

                                                                <div id='ask_1_3' style="position:absolute;z-index:10;padding-left:10px;margin-top:5px;"></div>
                                                                  <div class="w3-white">
                                                                    <div class="w3-red" style="height:26px;width:0%" id="ask_1_4"></div>
                                                                  </div>


                                                            </td>
                                                            <td id='ask_1_2' class='v_none' width="33%" style="padding-left:20px;"  ></td>    
                                                            <td id='ask_1_1' class='v_none1' width="33%" ></td>
                                                                                                              
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>

                                                            <td class='v_short_order_btn' style="text-align:center" width="33%"  onclick="fn_set_sell_order_price(2);" >

                                                                <div id='ask_2_3' style="position:absolute;z-index:10;padding-left:10px;margin-top:5px;"></div>
                                                                  <div class="w3-white">
                                                                    <div class="w3-red" style="height:26px;width:0%" id="ask_2_4"></div>
                                                                  </div>


                                                            </td>
                                                            <td id='ask_2_2' class='v_none' width="33%" style="padding-left:20px;"  ></td>    
                                                            <td id='ask_2_1' class='v_none1' width="33%" ></td>
                                                                                                              
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>

                                                            <td class='v_short_order_btn' style="text-align:center" width="33%"  onclick="fn_set_sell_order_price(3);" >

                                                                <div id='ask_3_3' style="position:absolute;z-index:10;padding-left:10px;margin-top:5px;"></div>
                                                                  <div class="w3-white">
                                                                    <div class="w3-red" style="height:26px;width:0%" id="ask_3_4"></div>
                                                                  </div>


                                                            </td>
                                                            <td id='ask_3_2' class='v_none' width="33%" style="padding-left:20px;"  ></td>    
                                                            <td id='ask_3_1' class='v_none1' width="33%" ></td>
                                                                                                              
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>

                                                            <td class='v_short_order_btn' style="text-align:center" width="33%"  onclick="fn_set_sell_order_price(4);" >

                                                                <div id='ask_4_3' style="position:absolute;z-index:10;padding-left:10px;margin-top:5px;"></div>
                                                                  <div class="w3-white">
                                                                    <div class="w3-red" style="height:26px;width:0%" id="ask_4_4"></div>
                                                                  </div>


                                                            </td>
                                                            <td id='ask_4_2' class='v_none' width="33%" style="padding-left:20px;"  ></td>    
                                                            <td id='ask_4_1' class='v_none1' width="33%" ></td>
                                                                                                              
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>

                                                            <td class='v_short_order_btn' style="text-align:center" width="33%"  onclick="fn_set_sell_order_price(5);" >

                                                                <div id='ask_5_3' style="position:absolute;z-index:10;padding-left:10px;margin-top:5px;"></div>
                                                                  <div class="w3-white">
                                                                    <div class="w3-red" style="height:26px;width:0%" id="ask_5_4"></div>
                                                                  </div>


                                                            </td>
                                                            <td id='ask_5_2' class='v_none' width="33%" style="padding-left:20px;"  ></td>    
                                                            <td id='ask_5_1' class='v_none1' width="33%" ></td>
                                                                                                              
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>

                                                            <td class='v_short_order_btn' style="text-align:center" width="33%"  onclick="fn_set_sell_order_price(6);" >

                                                                <div id='ask_6_3' style="position:absolute;z-index:10;padding-left:10px;margin-top:5px;"></div>
                                                                  <div class="w3-white">
                                                                    <div class="w3-red" style="height:26px;width:0%" id="ask_6_4"></div>
                                                                  </div>


                                                            </td>
                                                            <td id='ask_6_2' class='v_none' width="33%" style="padding-left:20px;"  ></td>    
                                                            <td id='ask_6_1' class='v_none1' width="33%" ></td>
                                                                                                              
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>

                                                            <td class='v_short_order_btn' style="text-align:center" width="33%"  onclick="fn_set_sell_order_price(7);" >

                                                                <div id='ask_7_3' style="position:absolute;z-index:10;padding-left:10px;margin-top:5px;"></div>
                                                                  <div class="w3-white">
                                                                    <div class="w3-red" style="height:26px;width:0%" id="ask_7_4"></div>
                                                                  </div>


                                                            </td>
                                                            <td id='ask_7_2' class='v_none' width="33%" style="padding-left:20px;"  ></td>    
                                                            <td id='ask_7_1' class='v_none1' width="33%" ></td>
                                                                                                              
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>

                                                            <td class='v_short_order_btn' style="text-align:center" width="33%"  onclick="fn_set_sell_order_price(8);" >

                                                                <div id='ask_8_3' style="position:absolute;z-index:10;padding-left:10px;margin-top:5px;"></div>
                                                                  <div class="w3-white">
                                                                    <div class="w3-red" style="height:26px;width:0%" id="ask_8_4"></div>
                                                                  </div>


                                                            </td>
                                                            <td id='ask_8_2' class='v_none' width="33%" style="padding-left:20px;"  ></td>    
                                                            <td id='ask_8_1' class='v_none1' width="33%" ></td>
                                                                                                              
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    
                                              
                                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                                  
                                                        <tr>

                                                            <td class='v_short_order_btn' style="text-align:center" width="33%"  onclick="fn_set_sell_order_price(9);" >

                                                                <div id='ask_9_3' style="position:absolute;z-index:10;padding-left:10px;margin-top:5px;"></div>
                                                                  <div class="w3-white">
                                                                    <div class="w3-red" style="height:26px;width:0%" id="ask_9_4"></div>
                                                                  </div>


                                                            </td>
                                                            <td id='ask_9_2' class='v_none' width="33%" style="padding-left:20px;"  ></td>    
                                                            <td id='ask_9_1' class='v_none1' width="33%" ></td>
                                                                                                              
                                                        </tr>
                                                                                  
                                                    </table>
                                                
                                                    

                                                </div>
                                            </td>
  

                                        </tr>

                                    </table>



                                </td>
                            </tr>
                        </table>
              
	                     




<div id="main_license" style="display:none;padding:0px;"   >
	                        <table width="100%" border="0" cellpadding="0" cellspacing="0" style="border:4px solid #ff6e6a" >
 	                            <tr>
  	                                <td valign="top" width="50%" style="border:1px solid #dedede;background:#efefef;padding:5px;" height="100" >
                                       <table width="100%" border="0" cellpadding="0" cellspacing="0" >
                                           <tr>

                                               <td id="btc_bar"></td>
                                               <td id="btc_address" style="font-size:0.8rem;"></td>
                                           </tr>



                                           </table>
                                    </td>
                                </tr>
                                 <tr>
  	                                <td valign="top" width="50%" style="border:1px solid #dedede;background:#efefef;padding:5px;font-size:0.8rem;" >
                                       <table width="100%" border="0" cellpadding="0" cellspacing="0" >
                                           <tr>
                                               <td height="40"  style="font-size:0.8rem;">API ?? ????? ??? ??? ???.</td>

                                           </tr>
                                           <tr>
                                               <td  style="font-size:0.8rem;">
                                                    ??? ??? ????? ????? ???.<br> ???????? ???? ???.<br> ????? 3??? ???????.
                                               </td>

                                           </tr>
                                           <tr>
                                               <td height="10">
                                                  
                                               </td>

                                           </tr>
                                           <tr>
                                               <td style="padding-left:10px;">
                                                   30? <i class="fa fa-fw fa-bitcoin"></i> 0.01 
                                               </td>

                                           </tr>
                                           <tr>
                                               <td style="padding-left:10px;">
                                                   60? <i class="fa fa-fw fa-bitcoin"></i> 0.018   ( 10% ??)
                                               </td>
                                           </tr>
                                           <tr>
                                               <td style="padding-left:10px;">
                                                  90? <i class="fa fa-fw fa-bitcoin"></i> 0.024   ( 20% ??)
                                               </td>
                                           </tr>

                                           </table>
                                    </td>

                                </tr>
                            </table>
                        </div>


                        <div id="main_access"   >
	                    <table width="100%" border="0" cellpadding="0" cellspacing="0" >
 	                        <tr>
  	                            <td valign="top" width="33%" style="border:1px solid #dedede;background:#efefef;padding:5px;" height="50" >
                                    <input type="text" id="api_key" name="api_key" value="" placeholder="input BitMEX API Key" style="width:100%;height:60px;text-align:center;" />
                                </td>
                            </tr>
                            <tr>
  	                            <td valign="top" width="33%" style="border:1px solid #dedede;background:#efefef;padding:5px;" >
                                    <input type="password" id="api_sig" name="api_sig" value="" placeholder="input BitMEX API Secure Key" style="width:100%;height:60px;text-align:center;"  />
                                </td>
                            </tr>
                            <tr>
  	                            <td valign="top" width="33%" style="border:1px solid #dedede;background:#efefef;padding:5px;" >
                                    <input type="button" id="api_btn" name="api_btn" value="Connect BitMex API"  style="width:100%;height:60px;display:none;background:linear-gradient( to bottom, #719cff, #3a76ff );"  onclick="fn_access();"/>
                                </td>
                            </tr>
                        </table>

                      
                        </div>

                        <div id="main_trade"   style="display:none;"  >

	                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
 	                        <tr>
  	                            <td valign="top" width="100%" style="border:1px solid #333;background:linear-gradient( to bottom, #999, #555 );padding:5px;" height="200">
                                      <table width="100%" border="0" cellpadding="0" cellspacing="0">



                                          <tr>
                                              <td width="40%">
                                                  <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                      <tr>
                                                      
                                                          <td width="50%"  style="padding:5px;">
                                                              <table width="100%" border="0" cellpadding="0" cellspacing="0" style="border:2px solid #555;color:#fff;">
                                                                  <tr>
                                                                      <td colspan="2" style="background:linear-gradient( to bottom, #6da0fd, #005aff );" height="30">
                                                                          
                                                                          
                                                                         
                                                                          
                                                                          
                                                                          
                                                                          <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                              <tr>
                                                                                  <td style="vertical-align:middle;font-size:0.6rem;color:#fff;" width="50%">
                                                                                      <input type="checkbox"  id="btn_buy_post_price_check" style="width:20px;height:20px;" checked  />??????
                                                                                  </td>
                                                                                  
                                                                                  <td  width="50%" style="font-size:0.8rem;">
                                                                                      ?? <input type="text" value="" id="btn_buy_post_price_sp" class="btn_input_half" placeholder="-$" /> 
                                                                                  </td>
                                                                                  </table>



                                                                          
                                                                      </td>
                                                                  </tr>

                                                                  <tr>
                                                  
                                                                      <td width="40%" style="font-size:0.8rem;text-align:center;background:#000;" height="24">
                                                                          <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                              <tr>
                                                                                  <td>
                                                                                      <input type="button" value="?" onclick="fn_set_price_buy(1);" style="color:#6da0fd;width:38px;height:20px;"  />
                                                                                  </td>
                                                                                  
                                                                                  <td>
                                                                                      <input type="button" value="?" onclick="fn_set_price_buy(2);" style="color:#6da0fd;width:38px;height:20px;"  />
                                                                                  </td>
                                                                                  </table>

                                                                      </td>
                                                                      


                                                                      <td width="60%" style="font-size:0.8rem;background:#000;" align="right">
                                                                         <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                              <tr>
                                                                                  <td style="vertical-align:middle;font-size:0.6rem;color:#fff;" width="50%">
                                                                                      <input type="button" value="C" onclick="fn_set_price_buy_sp(0);" style="color:#6da0fd;width:35px;height:20px;"  />
                                                                                  </td>
                                                                                  <td style="vertical-align:middle;font-size:0.6rem;color:#fff;" width="50%">
                                                                                      <input type="button" value="?" onclick="fn_set_price_buy_sp(1);" style="color:#6da0fd;width:35px;height:20px;"  />
                                                                                  </td>
                                                                                  
                                                                                  <td style="vertical-align:middle;font-size:0.6rem;color:#fff;" width="50%">
                                                                                      <input type="button" value="?" onclick="fn_set_price_buy_sp(2);" style="color:#6da0fd;width:35px;height:20px;"  />
                                                                                  </td>
                                                                                  </table>

                                                                      </td>
                                                                  </tr>
                                      
                                                                  <tr>
                                                                      <td width="40%" ><input type="text" value="" id="btn_buy_post_price" class="btn_input" style="color:#6da0fd;" placeholder="$" /></td>
                                                                      <td width="60%"><input type="text" value="" id="btn_buy_post_size" class="btn_input" placeholder="0"  oninput="fn_set_limit_xbt(this.value);"  /></td>
                                                                  </tr>


                                                                  <tr>
                                                                      
                                                                      <td style="padding:1px;">
                                                                          <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                              <tr>
                                                                                  <td width="50%"><input type="button" value="100K" class="st_money" onclick="fn_set_amount('btn_buy_post_size',100000);" /></td>
                                                                                  <td width="50%"><input type="button" value="50K" class="st_money" onclick="fn_set_amount('btn_buy_post_size', 50000);" /></td>
                                                                              </tr>
                                                                              <tr>
                                                                                  <td width="50%"><input type="button" value="10K" class="st_money" onclick="fn_set_amount('btn_buy_post_size', 10000);"  /></td>
                                                                                  <td width="50%"><input type="button" value="5K" class="st_money" onclick="fn_set_amount('btn_buy_post_size', 5000);"  /></td>
                                                                              </tr>
                                                                              <tr>
                                                                                  <td width="50%"><input type="button" value="1K" class="st_money" onclick="fn_set_amount('btn_buy_post_size', 1000);"  /></td>
                                                                                  <td width="50%"><input type="button" value="CC" class="st_money" onclick="fn_set_amount('btn_buy_post_size', 0);" /></td>
                                                                              </tr>
                                                                          </table>

                                                                      </td>
                                                                      <td  ><input type="button" value="??? ??"  class="btn_buy" onclick="fn_mex_order_post_buy();"  style="height:96px;width:100%" id="order_btn_limit_buy" /> </td>
                                                                  </tr>
                                                                  <tr bgcolor="#777">
                                                                      <td width="40%" align="center" style="font-size:0.7rem;" height="30">???(??)</td>
                                                                      <td width="60%" style="padding:4px;font-size:0.7rem;">
                                                                          
                                                                          <select id="btn_buy_spider_cnt" style="width:46px;height:24px;font-size:0.6rem;"  >
                                                                              <option value="0">Cnt</option>
                                                                              
                                                                              <option value="1">+ 1</option>
                                                                              
                                                                              <option value="2">+ 2</option>
                                                                              
                                                                              <option value="3">+ 3</option>
                                                                              
                                                                              <option value="4">+ 4</option>
                                                                              
                                                                              <option value="5">+ 5</option>
                                                                              
                                                                              <option value="6">+ 6</option>
                                                                              
                                                                              <option value="7">+ 7</option>
                                                                              
                                                                              <option value="8">+ 8</option>
                                                                              
                                                                              <option value="9">+ 9</option>
                                                                              
                                                                              <option value="10">+ 10</option>
                                                                              
                                                                              <option value="11">+ 11</option>
                                                                              
                                                                              <option value="12">+ 12</option>
                                                                              
                                                                              <option value="13">+ 13</option>
                                                                              
                                                                              <option value="14">+ 14</option>
                                                                              
                                                                              <option value="15">+ 15</option>
                                                                              
                                                                              <option value="16">+ 16</option>
                                                                              
                                                                              <option value="17">+ 17</option>
                                                                              
                                                                              <option value="18">+ 18</option>
                                                                              
                                                                              <option value="19">+ 19</option>
                                                                              
                                                                              <option value="20">+ 20</option>
                                                                              
                                                                          </select>
                                                                          <input type="text" value="" id="btn_buy_spider_step" class="btn_input_half" placeholder="$" maxlength="5"   />
                                                                      </td>
                                                                  </tr>
                                                                  <tr bgcolor="#777">
                                                                      <td align="center"><input type="button" value="Reset" onclick="fn_set_spider_buy_reset();" style="color:#6da0fd;width:80%;height:20px;"  /></td>
                                                                      <td align="right" style="padding-left:5px;" height="30">
                                                                         <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                              <tr>
                                                                                  <td>
                                                                                      <input type="button" value="?" onclick="fn_set_spider_buy_up();" style="color:#6da0fd;width:40px;height:20px;"  />
                                                                                  </td>
                                                                                  
                                                                                  <td>
                                                                                      <input type="button" value="?" onclick="fn_set_spider_buy_down();" style="color:#6da0fd;width:40px;height:20px;"  />
                                                                                  </td>
                                                                                  </table>
                                                                      </td>
                                                                  </tr>

                                                                  <tr>
                                                                      <td colspan="2" style="vertical-align:middle;font-size:0.8rem;background:#555;" height="30">
                                                                          
                                                                          <input type="checkbox"  id="btn_buy_post_option_check" style="width:20px;height:20px;" checked  />Post
                                                                          <input type="checkbox"  id="btn_buy_post_reduce_check" style="width:20px;height:20px;"   />Reduce
                                                                      </td>
                                                                  </tr>
                                                                </table>


                                                              <div id="vm_market_buy">
                                                              <br />
                                          

                                                              <table width="100%" border="0" cellpadding="0" cellspacing="0" style="border:2px solid #555;">
                                  
                                                                  <tr>
                                                                      <td  width="40%" style="vertical-align:middle;font-size:0.8rem;color:#6da0fd;text-align:center;background:#333;border:1px solid #000;border-right:none;" height="30">
                                                                          Size $
                                                                      </td>
                                                              
                                                                      <td  width="60%"><input type="text" value="" id="btn_buy_market_size" class="btn_input" placeholder="0"  oninput="fn_set_market_xbt_buy(this.value);"  /></td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td style="padding:1px;">
                                                                          <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                              <tr>
                                                                                  <td width="50%"><input type="button" value="100K" class="st_money" onclick="fn_set_amount('btn_buy_market_size', 100000);" /></td>
                                                                                  <td width="50%"><input type="button" value="50K" class="st_money" onclick="fn_set_amount('btn_buy_market_size', 50000);" /></td>
                                                                              </tr>
                                                                              <tr>
                                                                                  <td width="50%"><input type="button" value="10K" class="st_money" onclick="fn_set_amount('btn_buy_market_size', 10000);"  /></td>
                                                                                  <td width="50%"><input type="button" value="5K" class="st_money" onclick="fn_set_amount('btn_buy_market_size', 5000);"  /></td>
                                                                              </tr>
                                                                              <tr>
                                                                                  <td width="50%"><input type="button" value="1K" class="st_money" onclick="fn_set_amount('btn_buy_market_size', 1000);"  /></td>
                                                                                  <td width="50%"><input type="button" value="CC" class="st_money" onclick="fn_set_amount('btn_buy_market_size', 0);" /></td>
                                                                              </tr>
                                                                          </table>

                                                                      </td>
                                                                      <td >
                                                                          <input type="button" value="??? ??"  class="btn_buy"  style="height:96px;width:100%" onclick="fn_mex_order_market_buy();"  id="order_btn_market_buy" /></td>
                                                                  </tr>
                                                                </table>
                                                                  </div>
                                                              
                                                          </td>
                                                      </tr>
                                                      </table>
                                              </td>
                                            
                                              <td width="40%">
                                                  <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                      <tr>
                                                          
                                                          <td width="50%"  style="padding:5px;">
                                                              <table width="100%" border="0" cellpadding="0" cellspacing="0" style="border:2px solid #555;color:#fff;">
                                                                  <tr>
                                                                      <td colspan="2" style="vertical-align:middle;font-size:0.6rem;background:linear-gradient( to bottom, #fe6f58, #ff4122 );" height="30">
                                                                          
                                                      
                                                                          
                                                                          
                                                                          <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                              <tr>
                                                                                  <td style="vertical-align:middle;font-size:0.6rem;color:#fff;" width="50%">
                                                                                      <input type="checkbox"  id="btn_sell_post_price_check" style="width:20px;height:20px;" checked  />??????
                                                                                  </td>
                                                                                  
                                                                                  <td  width="50%" style="font-size:0.8rem;">
                                                                                      ?? <input type="text" value="" id="btn_sell_post_price_sp" class="btn_input_half" placeholder="-$" /> 
                                                                                  </td>
                                                                                  </table>

                                                                          
                                                                      </td>
                                                                  </tr>

                                                                  <tr>
                                                                      <td width="40%" style="font-size:0.8rem;text-align:center;background:#000;" height="24">
                                                                          <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                              <tr>
                                                                                  <td>
                                                                                      <input type="button" value="?" onclick="fn_set_price_sell(1);" style="color:#6da0fd;width:38px;height:20px;"  />
                                                                                  </td>
                                                                                  
                                                                                  <td>
                                                                                      <input type="button" value="?" onclick="fn_set_price_sell(2);" style="color:#6da0fd;width:38px;height:20px;"  />
                                                                                  </td>
                                                                                  </table>

                                                                      </td>
                                                                      

                                                                      <td width="60%" style="font-size:0.8rem;background:#000;" align="right">
                                                                         <table width="60%" border="0" cellpadding="0" cellspacing="0">
                                                                              <tr>
                                                                                  <td style="vertical-align:middle;font-size:0.6rem;color:#fff;" width="50%">
                                                                                      <input type="button" value="C" onclick="fn_set_price_sell_sp(0);" style="color:#6da0fd;width:35px;height:20px;"  />
                                                                                  </td>
                                                                                  <td style="vertical-align:middle;font-size:0.6rem;color:#fff;" width="50%">
                                                                                      <input type="button" value="?" onclick="fn_set_price_sell_sp(1);" style="color:#6da0fd;width:35px;height:20px;"  />
                                                                                  </td>
                                                                                  
                                                                                  <td style="vertical-align:middle;font-size:0.6rem;color:#fff;" width="50%">
                                                                                      <input type="button" value="?" onclick="fn_set_price_sell_sp(2);" style="color:#6da0fd;width:35px;height:20px;"  />
                                                                                  </td>
                                                                                  </table>

                                                                      </td>

                                                                  </tr>
                                                                  <tr>
                                                                      <td width="40%"><input type="text" value="" name="btn_sell_post_price" id="btn_sell_post_price" class="btn_input" style="color:#fa7661;"  placeholder="$" /></td>
                                                                      <td width="60%"><input type="text" value="" name="btn_sell_post_size" id="btn_sell_post_size" class="btn_input" placeholder="0" /></td>
                                                                  </tr>

                                                                  <tr>
                                                                      <td style="padding:1px;">
                                                                          <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                              <tr>
                                                                                  <td width="50%"><input type="button" value="100K" class="st_money" onclick="fn_set_amount('btn_sell_post_size', 100000);" /></td>
                                                                                  <td width="50%"><input type="button" value="50K" class="st_money" onclick="fn_set_amount('btn_sell_post_size', 50000);" /></td>
                                                                              </tr>
                                                                              <tr>
                                                                                  <td width="50%"><input type="button" value="10K" class="st_money" onclick="fn_set_amount('btn_sell_post_size', 10000);"  /></td>
                                                                                  <td width="50%"><input type="button" value="5K" class="st_money" onclick="fn_set_amount('btn_sell_post_size', 5000);"  /></td>
                                                                              </tr>
                                                                              <tr>
                                                                                  <td width="50%"><input type="button" value="1K" class="st_money" onclick="fn_set_amount('btn_sell_post_size', 1000);"  /></td>
                                                                                  <td width="50%"><input type="button" value="CC" class="st_money" onclick="fn_set_amount('btn_sell_post_size', 0);" /></td>
                                                                              </tr>
                                                                          </table>

                                                                      </td>
                                                                      <td   ><input type="button" value="??? ??"  class="btn_sell" onclick="fn_mex_order_post_sell();"  style="height:96px;width:100%" id="order_btn_limit_sell" /></td>
                                                                  </tr>
                                                                  <tr bgcolor="#777">
                                                                      <td width="40%" align="center" style="font-size:0.7rem;">???(??)</td>
                                                                      <td width="60%" style="padding:4px;font-size:0.6rem;">
                                                                          
                                                                          <select id="btn_sell_spider_cnt" style="width:45px;height:24px;font-size:0.6rem;"  >
                                                                              <option value="0">Cnt</option>
                                                                              
                                                                              <option value="1">+ 1</option>
                                                                              
                                                                              <option value="2">+ 2</option>
                                                                              
                                                                              <option value="3">+ 3</option>
                                                                              
                                                                              <option value="4">+ 4</option>
                                                                              
                                                                              <option value="5">+ 5</option>
                                                                              
                                                                              <option value="6">+ 6</option>
                                                                              
                                                                              <option value="7">+ 7</option>
                                                                              
                                                                              <option value="8">+ 8</option>
                                                                              
                                                                              <option value="9">+ 9</option>
                                                                              
                                                                              <option value="10">+ 10</option>
                                                                              
                                                                              <option value="11">+ 11</option>
                                                                              
                                                                              <option value="12">+ 12</option>
                                                                              
                                                                              <option value="13">+ 13</option>
                                                                              
                                                                              <option value="14">+ 14</option>
                                                                              
                                                                              <option value="15">+ 15</option>
                                                                              
                                                                              <option value="16">+ 16</option>
                                                                              
                                                                              <option value="17">+ 17</option>
                                                                              
                                                                              <option value="18">+ 18</option>
                                                                              
                                                                              <option value="19">+ 19</option>
                                                                              
                                                                              <option value="20">+ 20</option>
                                                                              
                                                                          </select>
                                                                          <input type="text" value="" id="btn_sell_spider_step" class="btn_input_half" placeholder="$"  maxlength="5"  />
                                                                      </td>
                                                                  </tr>
                                                                  <tr bgcolor="#777">
                                                                      <td align="center"><input type="button" value="Reset" onclick="fn_set_spider_sell_reset();" style="color:#6da0fd;width:80%;height:20px;"  /></td>
                                                                      <td align="right" style="padding-left:5px;" height="30">
                                                                         <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                              <tr>
                                                                                  <td>
                                                                                      <input type="button" value="?" onclick="fn_set_spider_sell_up();" style="color:#6da0fd;width:40px;height:20px;"  />
                                                                                  </td>
                                                                                  
                                                                                  <td>
                                                                                      <input type="button" value="?" onclick="fn_set_spider_sell_down();" style="color:#6da0fd;width:40px;height:20px;"  />
                                                                                  </td>
                                                                                  </table>
                                                                      </td>
                                                                  </tr>

                                                                  <tr>
                                                                      <td colspan="2" style="vertical-align:middle;font-size:0.8rem;background:#555;" height="30">
                                                                          
                                                                          <input type="checkbox"  id="btn_sell_post_option_check" style="width:20px;height:20px;" checked  />Post
                                                                          <input type="checkbox"  id="btn_sell_post_reduce_check" style="width:20px;height:20px;"   />Reduce
                                                                      </td>
                                                                  </tr>
                                                                </table>

                                                                <div id="vm_market_sell">
                                                              <br />

                                                              <table width="100%" border="0" cellpadding="0" cellspacing="0" style="border:2px solid #555;">
                                     
                                                                  <tr>
                                                                      <td  width="40%" style="vertical-align:middle;font-size:0.8rem;color:#fa7661;text-align:center;background:#333;border:1px solid #000;border-right:none;" height="30">
                                                                          Size $
                                                                      </td>
                                                              
                                                                      <td  width="60%"><input type="text" value="" id="btn_sell_market_size" class="btn_input" placeholder="0" oninput="fn_set_market_xbt_sell(this.value);" /></td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td style="padding:1px;">
                                                                          <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                                                              <tr>
                                                                                  <td width="50%"><input type="button" value="100K" class="st_money" onclick="fn_set_amount('btn_sell_market_size', 100000);" /></td>
                                                                                  <td width="50%"><input type="button" value="50K" class="st_money" onclick="fn_set_amount('btn_sell_market_size', 50000);" /></td>
                                                                              </tr>
                                                                              <tr>
                                                                                  <td width="50%"><input type="button" value="10K" class="st_money" onclick="fn_set_amount('btn_sell_market_size', 10000);"  /></td>
                                                                                  <td width="50%"><input type="button" value="5K" class="st_money" onclick="fn_set_amount('btn_sell_market_size', 5000);"  /></td>
                                                                              </tr>
                                                                              <tr>
                                                                                  <td width="50%"><input type="button" value="1K" class="st_money" onclick="fn_set_amount('btn_sell_market_size', 1000);"  /></td>
                                                                                  <td width="50%"><input type="button" value="CC" class="st_money" onclick="fn_set_amount('btn_sell_market_size', 0);" /></td>
                                                                              </tr>
                                                                          </table>

                                                                      </td>
                                                                      <td  ><input type="button" value="??? ??"  class="btn_sell"  style="height:96px;width:100%" onclick="fn_mex_order_market_sell();"  id="order_btn_market_sell"  /></td>
                                                                  </tr>
                                                                </table>
                                                                </div>

                                                            </td>
                                                       
                                                       
                                                          </tr>
                                               
                                                   

   

                                                      </table>
                                              </td>
                                          </tr>

                                          </table>
                                                  <table width="100%" border="0" cellpadding="0" cellspacing="0" >
   
                                                      <tr>
                                                
                                                         
                                                          <td width="100%"  >
                                                           
                                                              <input type="button" value="???? ??" class="btn_stop" onclick="fn_mex_order_cancel_all()" />
                                                          </td>
                                                      </tr>
                                                      </table>
                                                  <table width="100%" border="0" cellpadding="0" cellspacing="0" >
   
                                                      <tr>
                                                         
                                                          <td width="50%" valign="top"  >

                                                              <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border:1px solid #555;color:#fff;border-collapse:collapse">
                                                                  <tr>
                                                                      <td width="75%" style="vertical-align:middle;font-size:0.8rem;background:#333;" height="30" align="center" colspan="3" id="status_buy">Buy Orders</td>
                                                                      <td width="25%" style="vertical-align:middle;font-size:0.8rem;background:#333;" height="30" align="center" >
                                                                      <input type="button" onclick="fn_mex_order_cancel_buy()" class='btn_ac_cancel' value="cancel" title="Cancel all buy orders" />
                                                                        </td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td width="25%" style="vertical-align:middle;font-size:0.8rem;" height="24" align="center">??</td>
                                                                      
                                                                      <td width="25%" style="vertical-align:middle;font-size:0.8rem;"  align="center">??</td>
                                                                      <td width="25%" style="vertical-align:middle;font-size:0.8rem;"  align="center">??</td>
                                                                      
                                                                      <td width="25%" style="vertical-align:middle;font-size:0.8rem;" align="center"  >??</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td colspan="4">
                                                                          <div id="order_buy_list">
   
                                                                          </div>
                                                                      </td>
                                                                  </tr>
                                                                  
                                                                </table>
                                                               
                                                              
                                                          </td>
                                                
                                                         
                                                          <td width="50%"  valign="top"  >
                                                         






                                                            <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border:1px solid #555;color:#fff;border-collapse:collapse;">
                                                                <tr>
                                                                      

                                                                    <td width="75%" style="vertical-align:middle;font-size:0.8rem;background:#333;" height="30" align="center" colspan="3" id="status_sell">Sell Orders</td>
                                                                    <td width="25%" style="vertical-align:middle;font-size:0.8rem;background:#333;" height="30" align="center"  >
                                                                    <input type="button" onclick="fn_mex_order_cancel_sell()" class='btn_ac_cancel' value="cancel" title="Cancel all sell orders" />
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    
                                                                    <td width="25%" style="vertical-align:middle;font-size:0.8rem;" height="24" align="center">??</td>
                                                                      
                                                                    <td width="25%" style="vertical-align:middle;font-size:0.8rem;"  align="center">??</td>
                                                                    <td width="25%" style="vertical-align:middle;font-size:0.8rem;"  align="center">??</td>
                                                                    <td width="25%" style="vertical-align:middle;font-size:0.8rem;"   align="center" onclick="fn_mex_order_cancel_sell();" class='btn_ac_buy_price' >??</td>  
                                                                      
                                                                </tr>
                                                                <tr>
                                                                    <td colspan="5" width="100%">
                                                                        <div id="order_sell_list">

                    




                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                  
                                                            </table>

                                                          </td>
                                                      </tr>
                                                      </table>

                                       <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                          <tr>

                                                <td width="20%" valign="top" style="padding-top:5px;" colspan="2">
                                             
                                                  <table width="100%" border="0" cellpadding="0" cellspacing="0" style="border:2px solid #555;">
                                                      <tr>
                                                          <td width="50%"  style="padding:5px;color:#aaa;font-size:0.8rem;background:#333;" align="center" height="30" colspan="2">Message board
                                                              
                                                          </td>
                                                        
                                                      </tr>
                                                      <tr>
                                                         
                                                          <td width="100%"  style="background:#333;color:#4fff08;font-size:0.8rem;" height="105"  align="center">
                                                            <span id="order_msg">API??? ?????<br>????? ?? ???? ??? ??? ???.</span>
                                                          </td>
                                                      </tr>

                                                    </table>
                                          
                                                  



                                              </td>


                                          </tr>


                                      </table>


                                </td>
                             </tr>
                        </table>



                        <table width="100%" border="0" cellpadding="0" cellspacing="0" style="" >
	                        <tr>

  	                            <td  width="100%" style="border:1px solid #555;background:linear-gradient( to bottom, #555, #333 );font-size:0.9rem;" height="30" align="center"  >
                                    
                                   
                                        <span style="color:#1fd02e;font-size:0.7rem;"id="ai_msg">status</span>
                                                                                        
                                </td>
  	                    

                                 </tr>


 	                        <tr>

  	                            <td valign="top" width="40%" style="border:1px solid #555;background:#333;padding:10px;font-size:0.9rem;" height="50"  >
                                    
                                   
  	                                    <span id="signal_lamp1" class="v_short"></span><br />
                                      <span id="signal_lamp2" class="v_short"></span>
                                      
                                                                                        
                                </td>
  	                    

                                 </tr>

 


                                 <tr>

  	                            <td valign="top" width="30%" style="border:1px solid #555;background:linear-gradient( to bottom, #555, #333 );padding:5px;font-size:1.2rem;" height="50"  align="center">
                                  


                                       <table width="100%" border="0" cellpadding="0" cellspacing="0" style="color:#dedede;font-size:0.9rem;" >
                                            <tr>
                                                <td  width="20%">
                                                    <input type="checkbox"  id="btn_ai_buy" style="width:30px;height:30px;"      /> 
                                                </td>
                                                <td  style="font-size:0.7rem;"  width="80%">
                                                        ?? ????(????) <br /><br /><span id="ai_sell_count_ps" style="font-size:0.8rem;"></span>&nbsp;<span id="ai_sell_count" style="color:#f67302;font-size:0.8rem;"></span>
                                                </td>
                                            </tr>
                                        </table>


                                </td>
                                 </tr>
                                 <tr>
                                <td valign="top" width="30%" style="border:1px solid #555;background:linear-gradient( to bottom, #555, #333 );padding:5px;font-size:1.2rem;"  align="center">
                                       <table width="100%" border="0" cellpadding="0" cellspacing="0" style="color:#dedede;font-size:0.9rem;" >
                                            <tr>
                                                <td  width="20%">
                                                    <input type="checkbox"  id="btn_ai_sell" style="width:30px;height:30px;"     /> 
                                                </td>
                                                <td  style="font-size:0.7rem;" width="80%">
                                                        ?? ????(????) <br /><br /><span id="ai_buy_count_ps" style="font-size:0.8rem;"></span>&nbsp;<span id="ai_buy_count" style="color:#f67302;font-size:0.8rem;"></span>
                                                </td>
                                            </tr>
                                        </table>
                               
                                </td>
  	                      
                            </tr>
                        </table>





                        </div>





                </td>
            </tr>



<div id="log_locate" style="display:none"></div>
</center>



<script>
function fn_timezone() {
  var offset = new Date().getTimezoneOffset(), o = Math.abs(offset);
  return (offset < 0 ? "+" : "-") + ("00" + Math.floor(o / 60)).slice(-2) + ":" + ("00" + (o % 60)).slice(-2);
}


</script>
</boby>

	</td>

</tr>

    </table>                     

</div>
</center>

    </body>
    </!html>




<script src="//cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/core.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/sha256.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/hmac.js"></script>


<script type="text/javascript">

    var g_wws = 0;


    var wws = {};

    var overtime = 300;



    var g_loop = 30;

    function fn_loop() {
	 if (g_license != 0) {
        if (g_member != 0) {
            g_loop += 1;
  
            if (g_loop >= 60) {

                g_loop = 0;

                $('#my_menu').css('color', '#4fff08');

              //  fn_loop_process();



                setTimeout("fn_loop_signal();", 100);

            }
        }
	}
    }

    function fn_loop_signal() {
        $('#my_menu').css('color', '#fff');

    }


    function fn_loop_process() {

        var verb = 'GET';
        var path = '/api/v1/user/commission';
        var expdate = Math.floor(Date.now());

        var api_data = '';

        var qapi_signature = hmac(api_sig, verb + path + expdate + api_data);

        var Data = { "api_key": api_key, "api_sig": qapi_signature, "api_nonce": expdate, "api_data": api_data };


        $.ajax({
            type: "GET"
        , async: true
        , url: "./api/person_wallet.asp"
        , dataType: 'json'
        , timeout: 5000
        , data: Data
        , cache: false
        , contentType: "application/x-www-form-urlencoded;"

        , success: function (response, status, request) {

            $('#api_version').html('stamp:'+ Math.floor(Date.now()));
            $('#my_fee_maker').html( parseFloat(response.ETHUSD.makerFee * 100) + ' %');
            $('#my_fee_taker').html(parseFloat(response.ETHUSD.takerFee * 100) + ' %');

        }
        });


    }


    //====================================================================================================
    var g_access_retry = 0;

    var show_license = 0;

    function fn_license() {

        if (g_member != 0) {


            $.ajax({
                type: "POST"
            , async: true
            , url: "/include/license.asp?idx=" + g_member
            , dataType: "json"
            , timeout: 30000
            , cache: false
            , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
            , success: function (response, status, request) {


                g_license = response.license_on;

                $('#my_license').html(response.license + '<br> btc ' + response.btc + ' BM'+g_member );

                if (g_license == 0) {

                    if (show_license == 0) {
                       

                        $('#main_license').show();

                        if (response.wallet != '') {
                            $('#btc_address').html(response.wallet);

                            $('#btc_bar').html("<iframe src='https://chart.googleapis.com/chart?cht=qr&chs=150x150&chld=L|1&chl=" + response.wallet + "' height='150' width='150' scrolling='no' frameborder='0' marginwidth='0' marginheight='0'></iframe>");

                            show_license = 1;
                        } else {
                            $('#btc_address').html('??? ???? ??? ??????. ??? ??????.');
                        }
                    }


                } else {

                    show_license = 0;

                    $('#main_license').hide();
                }

            }

            });
        }


    }


    //====================================================================================================


    function fn_connect_api() {

        try {

            wws = new WebSocket("wss://www.bitmex.com/realtime?subscribe=trade:ETHUSD");

            wws.onopen = function () {
                $('#vm_access_msg').html('Connected Public Api. please login to api');
                wws.send('{"op":"subscribe","args":["orderBook10:ETHUSD"]}');

                if (g_wallet == 1) {
                    fn_access();
                }
            }

            wws.onmessage = function (e) {
                fn_rs(e.data);
            }
            wws.onclose = function (e) {
                fn_msg_disconnect("disconnected");

            }
            wws.onerror = function (e) {
                onError(e);
            }



        } catch (exception) {
            alert('Error : ' + exception);

        }
    }




    function onError(evt) {
        $('#order_msg').html('<span style="color: red;">ERROR Bimex V2 API </span> <br> Please wait a while ' + evt.Data);
    }

    function fn_msg_disconnect(e) {
      
        setTimeout("fn_connect_api()",5000);
    }



    function fn_reconnect() {
        $('#btn_connect').hide();
        window.open('?', '_self');
    }

    //====================================================================================================

    $("#send_q").bind("keypress", function (event) {
        if (event.which == 13) {
            fn_msg_rq();
        }
    });



    var api_ex_date = new Date().getTime();

    var api_key = "";
    var api_sec = "";

    var api_signature = "";
    var verb = 'GET';



    var path = '/api/v1/instrument';
    var api_data = '';

    var img = '';
    var chatlog_buy = [];
    var chatlog_sell = [];
    var msg_count = 0;
    var is_scroll_lock = false;


    function hmac(key, v) {
        var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);
        return hmacHasher.finalize(v).toString();
    }

    function fn_access() {


        api_key = $('#api_key').val();
        api_sig = $('#api_sig').val();

        api_sec = api_sig;

        if (api_key == '') {
            alert('Please input API Key..');
            return;
        }
        if (api_sig == '') {
            alert('Please input API Key..');
            return;
        }

        $('#api_btn').hide();


        $('#vm_access_msg').html('Connecting to BitMex Api, Please wait a while.')

        api_signature = hmac(api_sig, 'GET/realtime' + api_ex_date);

        var cmd;

        cmd = '{"op": "authKeyExpires", "args": ["' + api_key + '", '+api_ex_date+', "'+api_signature+'"]}';

        wws.send(cmd);


      
    }
    
    function fn_set_orders(order_id, order_price, order_size, order_delta, order_type) {




        this.order_id = order_id;
        this.order_price = order_price;
        this.order_size = order_size;
        this.order_delta = order_delta;
        this.order_type = order_type;
        this.order_amend = 0;
    }




    
    var sound_size_sell = 100000;

    var sound_size_buy_now = 0;
    var sound_size_sell_now = 0;
    var sound_size_order = 3000000;


    function fn_vol(vol) {

        g_vol = vol;

        obj_buy.volume = vol;
        obj_sell.volume = vol;

        obj_ac.volume = vol;
        obj_ok.volume = vol;
        obj_error.volume = vol;
        obj_typing.volume = vol;
        obj_alert.volume = vol;


        obj_buy_finex.volume = vol;
        obj_sell_finex.volume = vol;
    }

    function fn_size_order(size) {

        sound_size_order = size;
    }


    function fn_size_sell(size) {

        sound_size_sell = size;
    }

    var on_tb = 0;
    var on_ts = 0;

    function fn_return_long() {

        $("#title_long").toggle();
        $('#trade_long').css('background', '#131722');
        on_tb = 0;
    }
    function fn_return_short() {

        $("#title_short").toggle();
        $('#trade_short').css('background', '#131722');
        on_ts = 0;
    }



    var base_url = 'https://www.bitmex.com/api/v1';


    var api_work = 0;

    function fn_mex_order_market_buy() {

        
        var size = $('#btn_buy_market_size').val();

        if (size == '') {
            alert('input order  size');
            return;
        }
        $('#order_msg').html('Order Market price Buy....');
        fn_mex_order_market_buy_proc('Buy', '', size);
        obj_ac.play();

    }

    function fn_mex_order_market_sell() {


        var size = $('#btn_sell_market_size').val();

        if (size == '') {
            alert('input order  size');
            return;
        }
        $('#order_msg').html('Order Market price Sell....');
        fn_mex_order_market_sell_proc('Sell', '', size);
        obj_ac.play();
    }

    var status_market_buy = 0;
    var tmp_market_buy_over_cnt = 0;

    var over_market_buy_side = '';
    var over_market_buy_price = '';
    var over_market_buy_amount = '';

    function fn_mex_order_market_buy_proc_overload() {

        status_market_buy = 0;
        fn_mex_order_market_buy_proc(over_market_sell_side, over_market_sell_price, over_market_sell_amount);

    }


    function fn_mex_order_market_buy_proc(side, price, amount) {
        if (g_license == 0) {

            alert('please update api license');
            return;

        }
        if (status_market_buy != 0) {

            return;
        }
        over_market_buy_side = side;
        over_market_buy_price = price;
        over_market_buy_amount = amount;

        status_market_buy = 1;

        $('#status_buy').css('background', '#4fff08');
        

        var verb = 'POST';
        var path = '/api/v1/order';
        var expdate = Math.floor(Date.now());

        var api_data = 'symbol=ETHUSD&side=Buy&orderQty=' + amount + '&ordType=Market';

        var qapi_signature = hmac(api_sig, verb + path + expdate + api_data);

        var Data = { "api_key": api_key, "api_sig": qapi_signature, "api_nonce": expdate, "api_data": api_data };


        $.ajax({
            type: "POST"
        , async: true
        , url: "./api/order_limit.asp"
        , dataType: 'json'
        , timeout: 15000
        , data: Data
        , cache: false
        , contentType: "application/x-www-form-urlencoded;"

        , error: function (jqXHR, textStatus, errorThrown) {

            $('#status_buy').css('background', '#ff4628');
            $('#order_msg').html('<span style="color:#ff0000">' + textStatus + '</span>');
            status_market_buy = 0;
            tmp_market_buy_over_cnt = 0;
            obj_error.play();
        }
        , success: function (response, status, request) {

            

            var status = response.ordStatus;
            if (status == 'Filled') {
                $('#order_msg').html('??? ????? ???????. ');
                obj_ok.play();
            } else if (status == 'Canceled') {
                $('#order_msg').html(response.text);
                obj_error.play();
            } else {
                if (response.error != null) {

                    var msg_check = response.error.message;

                    if ($('#btn_overload').is(":checked")) {
                        if (msg_check == 'The system is currently overloaded. Please try again later.') {
                            
                            tmp_market_buy_over_cnt += 1;
                            
                            $('#order_msg').html('<span style="color:#ffcc00">???? ! ?????? ??????.' + tmp_market_buy_over_cnt + '</span><br><br>???? ??? ??? ?????.');
                            setTimeout("fn_mex_order_market_buy_proc_overload()", overtime);
                            obj_error.play();
                            return;
                        }
                    }


                    $('#order_msg').html('<span style="color:#ff0000">' + response.error.message + '</span>');
                } else {
                    $('#order_msg').html('<span style="color:#ff0000">' + response.text + '</span>');
                }
                obj_error.play();
            }
            $('#status_buy').css('background', '#333');
            tmp_market_buy_over_cnt = 0;
            status_market_buy = 0;
            
        }

        });


    }


    var status_market_sell = 0;
    var tmp_market_sell_over_cnt = 0;

    var over_market_sell_side = '';
    var over_market_sell_price = '';
    var over_market_sell_amount = '';

    function fn_mex_order_market_sell_proc_overload() {
 
        status_market_sell = 0;
        fn_mex_order_market_sell_proc(over_market_sell_side, over_market_sell_price, over_market_sell_amount);

    }


    function fn_mex_order_market_sell_proc(side, price, amount) {
        if (g_license == 0) {

            alert('please update api license');
            return;

        }
        if (status_market_sell != 0) {
            return;
        }
        status_market_sell = 1;

        over_market_sell_side = side;
        over_market_sell_price = price;
        over_market_sell_amount = amount;


        

        $('#status_sell').css('background', '#4fff08');

        var verb = 'POST';
        var path = '/api/v1/order';
        var expdate = Math.floor(Date.now());

        var api_data = 'symbol=ETHUSD&side=Sell&orderQty=' + amount + '&ordType=Market';

        var qapi_signature = hmac(api_sig, verb + path + expdate + api_data);

        var Data = { "api_key": api_key, "api_sig": qapi_signature, "api_nonce": expdate, "api_data": api_data };


        $.ajax({
            type: "POST"
        , async: true
        , url: "./api/order_limit.asp"
        , dataType: 'json'
        , timeout: 15000
        , data: Data
        , cache: false
        , contentType: "application/x-www-form-urlencoded;"
        , error: function (jqXHR, textStatus, errorThrown) {
            $('#status_sell').css('background', '#ff4628');
            status_market_sell = 0;
            tmp_market_sell_over_cnt = 0;
            $('#order_msg').html('<span style="color:#ff0000">' + textStatus + '</span>');
            obj_error.play();
        }
        , success: function (response, status, request) {

            

            var status = response.ordStatus;

            if (status == 'Filled') {
                $('#order_msg').html('??? ????? ???????.');
                obj_ok.play();
            } else if (status == 'Canceled') {
                $('#order_msg').html(response.text);
                obj_error.play();
            } else {
                if (response.error != null) {

                    var msg_check = response.error.message;

                    if ($('#btn_overload').is(":checked")) {
                        if (msg_check == 'The system is currently overloaded. Please try again later.') {
                            
                            tmp_market_sell_over_cnt += 1;
                            $('#order_msg').html('<span style="color:#ffcc00">???? ! ?????? ??????.' + tmp_market_sell_over_cnt + '</span><br><br>???? ??? ??? ?????.');
                            setTimeout("fn_mex_order_market_sell_proc_overload()", overtime);
                            obj_error.play();
                            return;
                        }
                    }

      
                    $('#order_msg').html('<span style="color:#ff0000">' + response.error.message + '</span>');
                } else {
                    $('#order_msg').html('<span style="color:#ff0000">' + response.text + '</span>');
                }
                obj_error.play();
            }

            tmp_market_sell_over_cnt = 0;
            status_market_sell = 0;
            $('#status_sell').css('background', '#333');
           
        }

        });


    }

    //////////////////////////////////////////////

    function fn_mex_order_post_buy() {


        if (g_license == 0) {

            alert('please update api license');
            return;

        }

        var price = $('#btn_buy_post_price').val();
        var size = $('#btn_buy_post_size').val();

        if (price == '' || size == '') {
            alert('input order  price or size');
            return;
        }



        var bulk_cnt = $('#btn_buy_spider_cnt').val();
        var bulk_step = $('#btn_buy_spider_step').val();
        if (bulk_step == '') {
            bulk_step = 0;
        }


        if (bulk_cnt >= 1 && bulk_step > 0) {

            if ($('#btn_order_same').is(":checked")) {
                var check_price = 0;
            }else{
                var check_price = 0;

                for (var i = 0; i <= bulk_cnt; i++) {
                    if (i == 0) {
                        check_price = parseFloat(price);
                    } else {
                        check_price = parseFloat(price) - parseFloat(bulk_step);
                    }
                    for (var x = 0; x < g_order_buy.length; x++) {
                        order = g_order_buy[x];

                        if (parseFloat(order.order_price) == parseFloat(check_price)) {
                            $('#order_msg').html('<span  style="color:#ff0000">??? XBT??? ??? ????.</span>');
                            return;
                        }
                    }

                }

            }

            $('#order_msg').html('Order Limit Bulk....');
            fn_mex_order_bulk('Buy', price, size, bulk_cnt, bulk_step);
        } else {

            if ($('#btn_order_same').is(":checked")) {
                var check_price = 0;
            }else{
                for (var x = 0; x < g_order_buy.length; x++) {
                    order = g_order_buy[x];

                    if (parseFloat(order.order_price) == parseFloat(price)) {
                        $('#order_msg').html('<span  style="color:#ff0000">??? XBT??? ??? ????.</span>');
                        return;
                    }
                }

            }


            $('#order_msg').html('Order Limit Buy....');
            fn_mex_order_buy_proc('Buy', price, size);
        }
        obj_ac.play();
    }


    function fn_mex_order_post_sell() {

        if (g_license == 0) {

            alert('please update api license');
            return;

        }


        var price = $('#btn_sell_post_price').val();
        var size = $('#btn_sell_post_size').val();

        if (price == '' || size == '') {
            alert('input order  price or size');
            return;
        }

        var bulk_cnt = $('#btn_sell_spider_cnt').val();
        var bulk_step = $('#btn_sell_spider_step').val();
        if (bulk_step == '') {
            bulk_step = 0;
        }

        if (bulk_cnt >= 1 && bulk_step > 0) {

            if ($('#btn_order_same').is(":checked")) {
                var check_price = 0;
            }else{
                var check_price = 0;

                for (var i = 0; i <= bulk_cnt; i++) {
                    if (i == 0) {
                        check_price = parseFloat(price);
                    } else {
                        check_price = parseFloat(price) - parseFloat(bulk_step);
                    }
                    for (var x = 0; x < g_order_sell.length; x++) {
                        order = g_order_sell[x];

                        if (parseFloat(order.order_price) == parseFloat(check_price)) {
                            $('#order_msg').html('<span  style="color:#ff0000">??? XBT??? ??? ????.</span>');
                            return;
                        }
                    }

                }

            }



            $('#order_msg').html('Order Limit Bulk....');
            fn_mex_order_bulk('Sell', price, size, bulk_cnt, bulk_step);
        } else {

            if ($('#btn_order_same').is(":checked")) {
                var check_price = 0;
            }else{

                for (var x = 0; x < g_order_sell.length; x++) {
                    order = g_order_sell[x];

                    if (parseFloat(order.order_price) == parseFloat(price)) {
                        $('#order_msg').html('<span  style="color:#ff0000">??? XBT??? ??? ????.</span>');
                        return;
                    }
                }

            }


            $('#order_msg').html('Order Limit Sell....');
            fn_mex_order_sell_proc('Sell', price, size);
        }


        obj_ac.play();
    }


    var status_bulk = 0;


    var bulk_side = '';
    var bulk_price = '';
    var bulk_amount = '';
    var gbulk_cnt = '';
    var gbulk_step = '';
    var bulk_over_cnt = 0;

    function fn_mex_order_bulk_overload() {

        status_bulk = 0;
        if (bulk_side == 'Buy') {


            if ($('#btn_order_same').is(":checked")) {
                var check_price = 0;

            }else{
                var check_price = 0;

                for (var i = 0; i <= bulk_cnt; i++) {
                    if (i == 0) {
                        check_price = parseFloat(price);
                    } else {
                        check_price = parseFloat(price) - parseFloat(bulk_step);
                    }
                    for (var x = 0; x < g_order_buy.length; x++) {
                        order = g_order_buy[x];

                        if (parseFloat(order.order_price) == parseFloat(check_price)) {
                            $('#order_msg').html('<span  style="color:#ff0000">??? XBT??? ??? ????.</span>');
                            return;
                        }
                    }

                }

            }




            if ($('#btn_buy_post_price_check').is(":checked")) {
                fn_mex_order_bulk(bulk_side, g_buy_price, bulk_amount, gbulk_cnt, gbulk_step);

            } else {
                fn_mex_order_bulk(bulk_side, bulk_price, bulk_amount, gbulk_cnt, gbulk_step);
            }
        }
        if (bulk_side == 'Sell') {



            if ($('#btn_order_same').is(":checked")) {

                var check_price = 0;
            }else{
                var check_price = 0;

                for (var i = 0; i <= bulk_cnt; i++) {
                    if (i == 0) {
                        check_price = parseFloat(price);
                    } else {
                        check_price = parseFloat(price) - parseFloat(bulk_step);
                    }
                    for (var x = 0; x < g_order_sell.length; x++) {
                        order = g_order_sell[x];

                        if (parseFloat(order.order_price) == parseFloat(check_price)) {
                            $('#order_msg').html('<span  style="color:#ff0000">??? XBT??? ??? ????.</span>');
                            return;
                        }
                    }

                }

            }





            if ($('#btn_sell_post_price_check').is(":checked")) {
                fn_mex_order_bulk(bulk_side, g_sell_price , bulk_amount, gbulk_cnt, gbulk_step);

            } else {
                fn_mex_order_bulk(bulk_side, bulk_price, bulk_amount, gbulk_cnt, gbulk_step);
            }
        }

    }

    function fn_mex_order_bulk(side, price, amount, bulk_cnt, bulk_step) {
        if (g_license == 0) {

            alert('please update api license');
            return;

        }
        if (status_bulk != 0) {

            $('#order_msg').html('<span style="color:#ff0000">wait before transaction..</span>');
            return;
        }

        bulk_side = side;
        bulk_price = price.trim();
        bulk_amount = amount;

        gbulk_cnt = bulk_cnt;

        gbulk_step = bulk_step.trim();




        status_bulk = 1;

        var verb = 'POST';
        var path = '/api/v1/order/bulk';
        var expdate = Math.floor(Date.now());

        var execInst = '';


        if (side == 'Buy') {
            $('#status_buy').css('background', '#4fff08');
            if ($('#btn_buy_post_option_check').is(":checked")) {
                execInst += 'ParticipateDoNotInitiate';
            }

            if ($('#btn_buy_post_reduce_check').is(":checked")) {
                if (execInst == '') {
                    execInst += 'ReduceOnly';
                } else {
                    execInst += ',ReduceOnly';
                }
            }

        } else if (side == 'Sell') {
            $('#status_sell').css('background', '#4fff08');
            if ($('#btn_sell_post_option_check').is(":checked")) {
                execInst += 'ParticipateDoNotInitiate';
            }

            if ($('#btn_sell_post_reduce_check').is(":checked")) {
                if (execInst == '') {
                    execInst += 'ReduceOnly';
                } else {
                    execInst += ',ReduceOnly';
                }
            }

        } else {

            $('#status_buy').css('background', '#333');
            $('#status_sell').css('background', '#333');

            status_bulk = 0;

            bulk_over_cnt = 0;
            status_bulk = 0;
            $('#order_msg').html('<span style="color:#ff0000">' + textStatus + '</span>');
            obj_error.play();
            return;

            }


        var orders_bulk = [];
        var api_data = 'orders=[';
        for (var i = 0; i <= bulk_cnt; i++) {

            if (i == 0) {
                api_data += '{"symbol":"ETHUSD","side":"' + side + '","orderQty":"' + amount + '","price":"' + price + '","ordType":"Limit","execInst":"' + execInst + '"}';
               

            } else {
                if (side == 'Buy') {
                    price = parseFloat(price) - parseFloat(bulk_step);
                } else {
                    price = parseFloat(price) + parseFloat(bulk_step);
                }
                api_data += ',{"symbol":"ETHUSD","side":"' + side + '","orderQty":"' + amount + '","price":"' + price + '","ordType":"Limit","execInst":"' + execInst + '"}';
              
            }

        }

        api_data += ']';



        var qapi_signature = hmac(api_sig, verb + path + expdate + api_data);

        var Data = { "api_key": api_key, "api_sig": qapi_signature, "api_nonce": expdate, "api_data": api_data };


        $.ajax({
            type: "POST"
        , async: true
        , url: "./api/order_limit_bulk.asp"
        , dataType: 'json'
        , timeout: 15000
        , data: Data
        , cache: false
        , contentType: "application/x-www-form-urlencoded;"
        , error: function (jqXHR, textStatus, errorThrown) {
            $('#status_buy').css('background', '#333');
            $('#status_sell').css('background', '#333');

            status_bulk = 0;
           
            bulk_over_cnt = 0;
            status_bulk = 0;
            $('#order_msg').html('<span style="color:#ff0000">' + textStatus + '</span>');
            obj_error.play();

        }
        , success: function (response, status, request) {

          

            var status;
            
            if (response.ordStatus != null) {
                status = response.ordStatus;
                obj_error.play();
                if ($('#btn_overload').is(":checked")) {
                    if (msg_check == 'The system is currently overloaded. Please try again later.') {

                        $('#status_buy').css('background', '#333');
                        $('#status_sell').css('background', '#333');

                        bulk_over_cnt += 1;
                        $('#order_msg').html('<span style="color:#ffcc00">retry ...Order Limit Bulk on Overload..' + bulk_over_cnt + '</span><br>' + price + '<br>Unmark to Stop Retry.');
                        setTimeout("fn_mex_order_bulk_overload()", overtime);
                        return;
                    }
                }
                var msg;

                if (response.error != null) {
                    $('#order_msg').html('<span style="color:#ff0000">' + response.error.message + '</span>');
                } else {
                    $('#order_msg').html('Order Limit bulk orders.. ok !');
                }


            } else if (response.error != null) {
           
                    obj_error.play();

                    if (response.error != null) {
                        $('#order_msg').html('<span style="color:#ff0000">' + response.error.message + '</span>');
                    } else {
                        $('#order_msg').html('Order Limit bulk orders.. ok !');
                    }


            } else {

                $('#order_msg').html('??? ??? ???????.');

                fn_update_order_bulk(response);

                obj_ok.play();
            }

            bulk_over_cnt = 0;
            status_bulk = 0;

                $('#status_buy').css('background', '#333');
                $('#status_sell').css('background', '#333');

        }

        });


    }

    /////////////////////////////////////////////////////////////////////////
    var status_limit_buy = 0;

    var cc_cnt = 0;

    var tmp_limit_buy_price;
    var tmp_limit_buy_size;
    var tmp_limit_buy_over_cnt=0;

    function fn_mex_order_buy_proc_overload() {
        status_limit_buy = 0;
        if ($('#btn_buy_post_price_check').is(":checked")) {
            fn_mex_order_buy_proc('Buy', g_buy_price, tmp_limit_buy_size);

        } else {
            fn_mex_order_buy_proc('Buy', tmp_limit_buy_price, tmp_limit_buy_size);
        }
    }

    function fn_mex_order_buy_proc(side, price, amount) {
        if (g_license == 0) {

            alert('please update api license');
            return;

        }

        if (status_limit_buy != 0) {
            return;
        }


        tmp_limit_buy_price = price;
        tmp_limit_buy_size = amount;

        status_limit_buy = 1;

   

        $('#status_buy').css('background', '#4fff08');


        var verb = 'POST';
        var path = '/api/v1/order';
        var expdate = Math.floor(Date.now());

        var execInst = '';
        if ($('#btn_buy_post_option_check').is(":checked")) {
            execInst += 'ParticipateDoNotInitiate';
        }

        if ($('#btn_buy_post_reduce_check').is(":checked")) {
            if (execInst == '') {
                execInst += 'ReduceOnly';
            } else {
                execInst += ',ReduceOnly';
            }
        }



        var api_data = 'symbol=ETHUSD&side=Buy&orderQty=' + amount + '&price=' + price + '&ordType=Limit&execInst=' + execInst ;

        var qapi_signature = hmac(api_sig, verb + path + expdate + api_data);

        var Data = { "api_key": api_key, "api_sig": qapi_signature, "api_nonce": expdate, "api_data": api_data };


        $.ajax({
            type: "POST"
        , async: true
        , url: "./api/order_limit.asp"
        , dataType: 'json'
        , timeout: 15000
        , data: Data
        , cache: false
        , contentType: "application/x-www-form-urlencoded;"
        , error: function (jqXHR, textStatus, errorThrown) {

            $('#status_buy').css('background', '#ff4628');
            tmp_limit_sell_over_cnt = 0;
            status_limit_buy = 0;
            $('#order_msg').html('<span style="color:#ff0000">' + textStatus + '</span>');
            obj_error.play();
        }
        , success: function (response, status, request) {

   
            var status = response.ordStatus;

            if (status == 'New') {
                $('#order_msg').html('??? ????? ???????.');

                fn_update_order(response);

                obj_ok.play();
            } else if (status == 'Canceled') {
                $('#order_msg').html('<span style="color:#ff0000">' + response.text + '</span>');
                obj_error.play();
            } else {
                obj_error.play();
                if (response.error != null) {

                    var msg_check = response.error.message;

                    if ($('#btn_overload').is(":checked")) {
                        if (msg_check == 'The system is currently overloaded. Please try again later.') {
                            
                            tmp_limit_buy_over_cnt += 1;
                            $('#order_msg').html('<span style="color:#ffcc00">???? ! ?????? ??????. ' + tmp_limit_buy_over_cnt + '</span><br>' + price + '<br><br>???? ??? ??? ?????.');
                            setTimeout("fn_mex_order_buy_proc_overload()", overtime);
                            return;
                        }
                    }

                    tmp_limit_buy_over_cnt = 0;
                    $('#order_msg').html('<span style="color:#ff0000">' + response.error.message + '</span>');
                } else {
                    $('#order_msg').html('<span style="color:#ff0000">' + response.text + '</span>');
                }
            }
            status_limit_buy = 0;
            tmp_limit_buy_over_cnt = 0;

            $('#status_buy').css('background', '#333');
        }

        });


    }
    var status_limit_sell = 0;
    var tmp_limit_sell_price;
    var tmp_limit_sell_size;
    var tmp_limit_sell_over_cnt = 0;

    function fn_mex_order_sell_proc_overload() {

        if ($('#btn_sell_post_price_check').is(":checked")) {

            fn_mex_order_sell_proc('Sell', g_sell_price, tmp_limit_sell_size);

        } else {
            fn_mex_order_sell_proc('Sell', tmp_limit_sell_price, tmp_limit_sell_size);
        }

        
    }

    function fn_mex_order_sell_proc(side, price, amount) {
        if (g_license == 0) {

            alert('please update api license');
            return;

        }
        if (status_limit_sell != 0) {

            return;
        }

        tmp_limit_sell_price = price;
        tmp_limit_sell_size = amount;



        status_limit_sell = 1;

        $('#status_sell').css('background', '#4fff08');




        var execInst = '';
        if ($('#btn_sell_post_option_check').is(":checked")) {
            execInst += 'ParticipateDoNotInitiate';
        }

        if ($('#btn_sell_post_reduce_check').is(":checked")) {
            if (execInst == '') {
                execInst += 'ReduceOnly';
            } else {
                execInst += ',ReduceOnly';
            }
        }


        var verb = 'POST';
        var path = '/api/v1/order';
        var expdate = Math.floor(Date.now());



        var api_data = 'symbol=ETHUSD&side=Sell&orderQty=' + amount + '&price=' + price + '&ordType=Limit&execInst=' + execInst;

        var qapi_signature = hmac(api_sig, verb + path + expdate + api_data);

        var Data = { "api_key": api_key, "api_sig": qapi_signature, "api_nonce": expdate, "api_data": api_data };


        $.ajax({
            type: "POST"
        , async: true
        , url: "./api/order_limit.asp"
        , dataType: 'json'
        , timeout: 15000
        , data: Data
        , cache: false
        , contentType: "application/x-www-form-urlencoded;"
        , error: function (jqXHR, textStatus, errorThrown) {

            $('#status_sell').css('background', '#ff4628');
            status_limit_sell = 0;
            tmp_limit_sell_over_cnt = 0;
            $('#order_msg').html('<span style="color:#ff0000">' + textStatus + '</span>');
            obj_error.play();
        }
        , success: function (response, status, request) {

            status_limit_sell = 0;

            var status = response.ordStatus;

            if (status == 'New') {
                $('#order_msg').html('??? ????? ???????.');
                obj_ok.play();

            } else if (status == 'Canceled') {
                $('#order_msg').html('<span style="color:#ff0000">' + response.text + '</span>');
                obj_error.play();
            } else {
                obj_error.play();
                var msg_check = response.error.message;
                
                if ($('#btn_overload').is(":checked")) {
                    if (msg_check == 'The system is currently overloaded. Please try again later.') {
                        status_limit_buy = 0;
                        tmp_limit_sell_over_cnt += 1;
                        
                        $('#order_msg').html('<span style="color:#ffcc00">???? ! ?????? ??????. ' + tmp_limit_sell_over_cnt + '</span><br>' + price + '<br><br>???? ??? ??? ?????.');
                        setTimeout("fn_mex_order_sell_proc_overload()", overtime);
                        return;
                    }
                }

                tmp_limit_sell_over_cnt = 0;

                if (response.error != null) {
                    $('#order_msg').html('<span style="color:#ff0000">' + response.error.message + '</span>');
                } else {
                    $('#order_msg').html('<span style="color:#ff0000">' + response.text + '</span>');
                }
            }

            tmp_limit_sell_over_cnt = 0;

            $('#status_sell').css('background', '#333');
        }

        });


    }



    function fn_mex_order_cancel(orderid) {

        if (g_license == 0) {

            alert('please update api license');
            return;

        }

        $('#order_msg').html('Order cancel....');

        var data = {};

        var verb = 'DELETE';
        var path = '/api/v1/order';
        var expdate = Math.floor(Date.now());


        var api_data = 'orderID=' + orderid;

        var qapi_signature = hmac(api_sig, verb + path + expdate + api_data);

        var Data = { "api_key": api_key, "api_sig": qapi_signature, "api_nonce": expdate, "api_data": api_data };


        $.ajax({
            type: "POST"
        , async: true
        , url: "./api/order_cancel.asp"
        , dataType: 'json'
        , timeout: 15000
        , data: Data
        , cache: false
        , contentType: "application/x-www-form-urlencoded;"
        , error: function (jqXHR, textStatus, errorThrown) {

            $('#order_msg').html('<span style="color:#ff0000">' + textStatus + '</span>');
            obj_error.play();
        }
        , success: function (response, status, request) {


            var status = response.ordStatus;
            if (status == 'Canceled') {
                $('#order_msg').html('??? ??? ???????.');
                obj_ok.play();
            } else {
                obj_error.play();

                if (response.error != null) {
                    $('#order_msg').html('<span style="color:#ff0000">' + response.error.message + '</span>');
                } else {
                    $('#order_msg').html('<span style="color:#ff0000">' + response.text + '</span>');
                }
            }


        }

        });

        obj_ac.play();
    }

    function fn_mex_order_cancel_all() {
        if (g_license == 0) {

            alert('please update api license');
            return;

        }


        if (g_order_sell.length == 0 && g_order_buy.length == 0 ) {

            obj_error.play();
            $('#order_msg').html('No have a record');
            return;

        }



        obj_ac.play();

        var data = {};


        var verb = 'DELETE';
        var path = '/api/v1/order/all';
        var expdate = Math.floor(Date.now());


        var api_data = 'symbol=ETHUSD';

        var qapi_signature = hmac(api_sig, verb + path + expdate + api_data);

        var Data = { "api_key": api_key, "api_sig": qapi_signature, "api_nonce": expdate, "api_data": api_data };


        $.ajax({
            type: "POST"
        , async: true
        , url: "./api/order_cancel_all.asp"
        , dataType: 'json'
        , timeout: 15000
        , data: Data
        , cache: false
        , contentType: "application/x-www-form-urlencoded;"
        , error: function (jqXHR, textStatus, errorThrown) {

            $('#order_msg').html('<span style="color:#ff0000">all Orders cancel.. Error </span>');

        }
        , success: function (response, status, request) {

           // $('#order_msg').html(response);
           
            if (response.error != null) {
                obj_error.play();

                var msg_check = response.error.message;

                if ($('#btn_overload').is(":checked")) {
                    if (msg_check == 'The system is currently overloaded. Please try again later.') {

       

                        $('#order_msg').html('<span style="color:#ffcc00">???? ! ?????? ??????. </span><br>' + price + '<br><br>???? ??? ??? ?????.');

                        setTimeout("fn_mex_order_cancel_all()", overtime);

                        return;
                    }
                } else {

                    $('#order_msg').html('<span style="color:#ff0000">' + response.error.message + '</span>');

                }




            } else {

                $('#order_msg').html('?? ??? ??? ???????.');
                obj_ok.play();
            }

        }
        });
        

    }

    function fn_mex_order_cancel_buy() {
        if (g_license == 0) {

            alert('please update api license');
            return;

        }

        if (g_order_buy.length == 0) {

            obj_error.play();
            $('#order_msg').html('No have a record');
            return;

        }



        obj_ac.play();

        var data = {};


        var verb = 'DELETE';
        var path = '/api/v1/order/all';
        var expdate = Math.floor(Date.now());


        var api_data = 'symbol=ETHUSD&filter=%7B%22side%22%3A%20%22Buy%22%7D';

        var qapi_signature = hmac(api_sig, verb + path + expdate + api_data);

        var Data = { "api_key": api_key, "api_sig": qapi_signature, "api_nonce": expdate, "api_data": api_data };


        $.ajax({
            type: "POST"
        , async: true
        , url: "./api/order_cancel_all.asp"
        , dataType: 'json'
        , timeout: 15000
        , data: Data
        , cache: false
        , contentType: "application/x-www-form-urlencoded;"
        , error: function (jqXHR, textStatus, errorThrown) {

            $('#order_msg').html('<span style="color:#ff0000">Orders cancel.. Error </span>');
            obj_error.play();
        }
        , success: function (response, status, request) {

            if (response.error != null) {

                obj_error.play();

                var msg_check = response.error.message;

                if ($('#btn_overload').is(":checked")) {
                    if (msg_check == 'The system is currently overloaded. Please try again later.') {

                        $('#order_msg').html('<span style="color:#ffcc00">???? ! ?????? ??????. </span><br>' + price + '<br><br>???? ??? ??? ?????.');
                        setTimeout("fn_mex_order_cancel_buy()", overtime);
                        return;
                    }
                } else {

                    $('#order_msg').html('<span style="color:#ff0000">' + response.error.message + '</span>');

                }
               


            } else {
                $('#order_msg').html('??? ?? ??? ???????.');
                obj_ok.play();
            }



        }

        });
       

    }

    function fn_mex_order_cancel_sell() {
        if (g_license == 0) {

            alert('please update api license');
            return;

        }

   
        if (g_order_sell.length == 0) {

            obj_error.play();
            $('#order_msg').html('No have a record');
            return;

        }

     


        var data = {};
        obj_ac.play();

        var verb = 'DELETE';
        var path = '/api/v1/order/all';
        var expdate = Math.floor(Date.now());


        var api_data = 'symbol=ETHUSD&filter=%7B%22side%22%3A%20%22Sell%22%7D';

        var qapi_signature = hmac(api_sig, verb + path + expdate + api_data);

        var Data = { "api_key": api_key, "api_sig": qapi_signature, "api_nonce": expdate, "api_data": api_data };


        $.ajax({
            type: "POST"
        , async: true
        , url: "./api/order_cancel_all.asp"
        , dataType: 'json'
        , timeout: 15000
        , data: Data
        , cache: false
        , contentType: "application/x-www-form-urlencoded;"
        , error: function (jqXHR, textStatus, errorThrown) {

            $('#order_msg').html('<span style="color:#ff0000">all Orders cancel.. Error </span>');

        }
        , success: function (response, status, request) {



            if (response.error != null) {

                obj_error.play();

                var msg_check = response.error.message;

                if ($('#btn_overload').is(":checked")) {
                    if (msg_check == 'The system is currently overloaded. Please try again later.') {

                        $('#order_msg').html('<span style="color:#ffcc00">???? ! ?????? ??????. </span><br>' + price + '<br><br>???? ??? ??? ?????.');
                        setTimeout("fn_mex_order_cancel_sell()", overtime);
                        return;
                    }
                } else {

                    $('#order_msg').html('<span style="color:#ff0000">' + response.error.message + '</span>');

                }



            } else {
                $('#order_msg').html('??? ?? ??? ???????.');
                obj_ok.play();
            }



        }

        });
    

    }

    var tmp_limit_close_over_cnt = 0;


    function fn_mex_order_close_position() {


        $('#order_msg').html('Position close...');
        fn_mex_order_close_position_proc();
    }

    function fn_mex_order_close_position_proc() {

       if (g_license == 0) {

            alert('please update api license');
            return;

        }



        if (g_position == 0) {
            obj_error.play();
            $('#order_msg').html('No have a record');
            return;
        }


        $('#status_buy').css('background', '#4fff08');
        $('#status_sell').css('background', '#4fff08');

        var verb = 'POST';
        var path = '/api/v1/order/closePosition';
        var expdate = Math.floor(Date.now());


        var api_data = 'symbol=XBTUSD';

        var qapi_signature = hmac(api_sig, verb + path + expdate + api_data);

        var Data = { "api_key": api_key, "api_sig": qapi_signature, "api_nonce": expdate, "api_data": api_data };


        $.ajax({
            type: "POST"
        , async: true
        , url: "./api/order_close.asp"
        , dataType: 'json'
        , timeout: 15000
        , data: Data
        , cache: false
        , contentType: "application/x-www-form-urlencoded;"
        , error: function (jqXHR, textStatus, errorThrown) {

            $('#status_buy').css('background', '#ff4628');
            $('#status_sell').css('background', '#ff4628');
            tmp_limit_close_over_cnt = 0;
            status_limit_buy = 0;
            $('#order_msg').html('<span style="color:#ff0000">' + textStatus + '</span>');

        }
        , success: function (response, status, request) {


            var status = response.ordStatus;


                if (response.error != null) {

                    var msg_check = response.error.message;

                    if ($('#btn_overload').is(":checked")) {
                        if (msg_check == 'The system is currently overloaded. Please try again later.') {
                            tmp_limit_close_over_cnt += 1;
                            $('#order_msg').html('<span style="color:#ffcc00">retry ...Close position on Overload..' + tmp_limit_close_over_cnt + '</span><br><br>Unmark to stop retry.');
                            setTimeout("fn_mex_order_close_position_proc()", overtime);
                            return;
                        }
                    }

                 
                    $('#order_msg').html('<span style="color:#ff0000">' + response.error.message + '</span>');
                } else {
                    $('#order_msg').html( response.text );
                }
 
  

                tmp_limit_close_over_cnt = 0;

                $('#status_buy').css('background', '#333');
            $('#status_sell').css('background', '#333');


        }

        });
        obj_ac.play();

    }



    function fn_set_buy_price() {
  
        var size = $('#pob_size').text();
        size = size.replace(",", "");

        $('#btn_sell_post_size').val(size);
        $('#btn_sell_market_size').val(size);

        obj_ac.play();
    }
    function fn_set_sell_price() {
        var size = $('#pos_size').text();
        size = size.replace(",", "");

        $('#btn_buy_post_size').val(size);
        $('#btn_buy_market_size').val(size);

        $('#btn_sell_post_size').val(size);
        $('#btn_sell_market_size').val(size);

        obj_ac.play();

    }

    function fn_set_buy_order_price(idx) {

        var price = $('#bid_' + idx + '_3').text();

        if (price == '') {
            return;
        }

        price = price.replace(",", "");

        $('#btn_buy_post_price_check').attr("checked", false);
        $('#btn_buy_post_price').val(price);

        if ($('#api_hoga_double').is(":checked")) {

            $('#btn_sell_post_price_check').attr("checked", false);
            $('#btn_sell_post_price').val(price);
        }

        obj_ac.play();

    }

    function fn_set_sell_order_price(idx) {

    
        var price = $('#ask_' + idx + '_3').text();


        if (price == '') {
            return;
        }

        price = price.replace(",", "");



       
        $('#btn_sell_post_price_check').attr("checked", false);
        $('#btn_sell_post_price').val(price);


        if ($('#api_hoga_double').is(":checked")) {

            $('#btn_buy_post_price_check').attr("checked", false);
            $('#btn_buy_post_price').val(price);
        }



        obj_ac.play();

    }

    function fn_mex_amend_buy(order_id, cc) {

  
        var order;

        var this_st = 0;

        var cnt = 0;

        if ($('#amend_buy_' + order_id).is(":checked")) {

            for (var i = 0; i < g_order_buy.length; i++) {
                order = g_order_buy[i];
   

                if (order.order_amend == 1) {
                       
                        cnt += 1;
        
                }
            }

      
            if (cnt >= 1) {
                alert('Auto Amend function for only one order');

                $('#amend_buy_' + order_id).attr('checked', false);
                return;
            }
 
            for (var i = 0; i < g_order_buy.length; i++) {

                order = g_order_buy[i];
   
                if (order.order_id == order_id) {
                    order.order_amend = 1;

                    g_order_buy[i] = order;

                }
                

            }


        } else {

            for (var i = 0; i < g_order_buy.length; i++) {
                order = g_order_buy[i];

                if (order.order_id == order_id) {

                    order.order_amend = 0;

                    g_order_buy[i] = order;
                }
            }


        }





    }
    function fn_mex_amend_sell(order_id, cc) {


        var order;

        var this_st = 0;

        var cnt = 0;

        if ($('#amend_sell_' + order_id).is(":checked")) {

            for (var i = 0; i < g_order_sell.length; i++) {
                order = g_order_sell[i];


                if (order.order_amend == 1) {

                    cnt += 1;

                }
            }


            if (cnt >= 1) {
                alert('Auto Amend function for only one order');

                $('#amend_buy_' + order_id).attr('checked', false);
                return;
            }

            for (var i = 0; i < g_order_sell.length; i++) {

                order = g_order_sell[i];

                if (order.order_id == order_id) {
                    order.order_amend = 1;

                    g_order_sell[i] = order;

                }


            }


        } else {

            for (var i = 0; i < g_order_sell.length; i++) {
                order = g_order_sell[i];

                if (order.order_id == order_id) {

                    order.order_amend = 0;

                    g_order_sell[i] = order;
                }
            }


        }

    }










    function fn_mex_amend(order_id, price) {



        var verb = 'PUT';
        var path = '/api/v1/order';
        var expdate = Math.floor(Date.now());


        var api_data = 'orderID=' + order_id + '&price=' + price;

        var qapi_signature = hmac(api_sig, verb + path + expdate + api_data);

        var Data = { "api_key": api_key, "api_sig": qapi_signature, "api_nonce": expdate, "api_data": api_data };
  

        $.ajax({
            type: "POST"
        , async: true
        , url: "./api/order_amend.asp"
        , dataType: 'json'
        , timeout: 15000
        , data: Data
        , cache: false
        , contentType: "application/x-www-form-urlencoded;"
        , error: function (jqXHR, textStatus, errorThrown) {


        }
        , success: function (response, status, request) {


        }

        });


    }


    function fn_set_amount(obj, amount) {

        var tx = $('#' + obj).val().trim();

        if (tx == '') {
            tx = 0;
        }

        tx = parseInt(tx) + parseInt(amount);

        if (amount == 0) {
            $('#' + obj).val('');
            tx = 0;
        } else {
            $('#' + obj).val(tx );
        }

        if (obj == 'btn_buy_market_size') {
            fn_set_market_xbt_buy(tx);
        }
        if (obj == 'btn_sell_market_size') {
            fn_set_market_xbt_sell(tx);
        }

    }


    function fn_set_limit_xbt(size) {

    
        /*

        if (size == '' || size == 0) {
            $('#order_btn_limit_buy').val("??? ??");
        } else {

 
    
            var xbt_rq = 0;
            var xbt_rq = 1;
            var xbt_rq = 2;

            var lever = 0;

            if (g_leverage == 0) {
                lever = 100;
            } else {
                lever = g_leverage;
            }

            var vv = $('#btn_buy_post_price').val();




       

            var vsize = size / (parseFloat(vv));

            xbt_rq = (1 / lever * vsize) + (vsize * 0.0015);



            var ts = parseFloat(g_xbt_real - vv);

            var gop1 = ts  *  net(g_xbt_real, vv) / vv



            

            $('#order_btn_limit_buy').val(parseFloat(xbt_rq).toFixed(4) + ' Xbt');

            // newOpenBuyPremium * net(currentQty, newOpenBuyQty) / newOpenBuyQty) 

            // newOpenSellPremium * net(-currentQty, newOpenSellQty) / newOpenSellQty)
            /*
                Math.abs((newOpenBuyPremium * net(currentQty, newOpenBuyQty) / newOpenBuyQty) || 0) +
                Math.abs((newOpenSellPremium * net(-currentQty, newOpenSellQty) / newOpenSellQty) || 0);

          
        }
          */
    
    }



    function fn_set_market_xbt_buy(size) {

        if (size == '' || size == 0) {
            $('#order_btn_market_buy').val("??? ??");
        } else {



            var xbt_rq = 0;
            var xbt_rq = 1;
            var xbt_rq = 2;

            var lever = 0;

            if (g_leverage == 0) {
                lever = 100;
            } else {
                lever = g_leverage;
            }


            var vsize = size / (parseFloat(g_buy_price));

      

            xbt_rq = (1 / lever * vsize) + (vsize * 0.0015);




            $('#order_btn_market_buy').val(parseFloat(xbt_rq).toFixed(4) + ' Xbt');
        }

    }

    function fn_set_price_buy(set) {


        $('#btn_buy_post_price_check').attr("checked", false);
        var xbt = $('#btn_buy_post_price').val();

        xbt = parseFloat(xbt);

        if (set == 1) {
            xbt += 0.5;
        } else {
            xbt -= 0.5;
        }
        $('#btn_buy_post_price').val(xbt);
        obj_ac.play();
    }

    function fn_set_price_buy_sp(set) {
        if (set == 0) {
            $('#btn_buy_post_price_sp').val('');
            obj_ac.play();
            return;

        }



        var xbt = $('#btn_buy_post_price_sp').val();

        if (xbt == '') {
            xbt = 0;
        }
        xbt = parseFloat(xbt);

        if (set == 1) {
            xbt += 0.5;
        } else {
            xbt -= 0.5;
        }
        $('#btn_buy_post_price_sp').val(xbt);
        obj_ac.play();
    }


    function fn_set_price_sell(set) {


        $('#btn_sell_post_price_check').attr("checked", false);
        var xbt = $('#btn_sell_post_price').val();

        xbt = parseFloat(xbt);

        if (set == 1) {
            xbt += 0.5;
        } else {
            xbt -= 0.5;
        }
        $('#btn_sell_post_price').val(xbt);
        obj_ac.play();
    }
    function fn_set_price_sell_sp(set) {

        if (set == 0) {
            $('#btn_sell_post_price_sp').val('');
            obj_ac.play();
            return;

        }


        var xbt = $('#btn_sell_post_price_sp').val();

        if (xbt == '') {
            xbt = 0;
        }
        xbt = parseFloat(xbt);

        if (set == 1) {
            xbt += 0.5;
        } else {
            xbt -= 0.5;
        }
        $('#btn_sell_post_price_sp').val(xbt);
        obj_ac.play();
    }

    function fn_set_market_xbt_sell(size) {

 

        if (size == '' || size == 0) {
            $('#order_btn_market_sell').val("??? ??");
        } else {



            var xbt_rq = 0;
            var xbt_rq = 1;
            var xbt_rq = 2;

            var lever = 0;

            if (g_leverage == 0) {
                lever = 100;
            } else {
                lever = g_leverage;
            }


            var vsize = size / (parseFloat(g_buy_price));



            xbt_rq = (1 / lever * vsize) + (vsize * 0.0015);




            $('#order_btn_market_sell').val(parseFloat(xbt_rq).toFixed(4) + ' Xbt');
        }

    }


    function fn_setCookie(cName, cValue, cDay) {
        var expire = new Date();
        expire.setDate(expire.getDate() + cDay);
        cookies = cName + '=' + escape(cValue) + '; path=/ '; 
        if (typeof cDay != 'undefined') cookies += ';expires=' + expire.toGMTString() + ';';
        document.cookie = cookies;
    }


    function fn_getCookie(cName) {
        cName = cName + '=';
        var cookieData = document.cookie;
        var start = cookieData.indexOf(cName);
        var cValue = '';
        if (start != -1) {
            start += cName.length;
            var end = cookieData.indexOf(';', start);
            if (end == -1) end = cookieData.length;
            cValue = cookieData.substring(start, end);
        }
        return unescape(cValue);
    }





    function fn_return_buy_lamp() {
        for (var i = 0; i <= 9; i++) {
            $('#bid_' + i + '_1').css('background', '#131722');
        }

    }


    function fn_return_sell_lamp() {
        for (var i = 0; i <= 9; i++) {
            $('#ask_' + i + '_1').css('background', '#131722');
        }


    }



    function fn_api_share_xbt() {



        if ( g_member != 0 ){

            if ($('#api_shared').is(":checked")) {

                var sum = (g_position_price - g_xbt_real);


                $.ajax({
                    type: "POST"
                , async: true
                , url: "api_shared.asp?idx=" + g_member + "&position=" + g_position + "&size=" + g_position_size + "&status=" + sum
                , dataType: "json"
                , timeout: 10000
                , cache: false
                , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
                , success: function (response, status, request) {

                    var pab1 = '';
                    var pab2 = parseInt(response.pab2);
                    var pab3 = parseInt(response.pab3);
                    var pab4 = parseInt(response.pab4);

                    var pas1 = '';
                    var pas2 = parseInt(response.pas2) * -1;
                    var pas3 = parseInt(response.pas3) * -1;
                    var pas4 = parseInt(response.pas4) * -1;


                    $('#pab_2').html(numberWithCommas(pab2));
                    $('#pab_3').html(numberWithCommas(pab3));
                    $('#pab_4').html(numberWithCommas(pab4));

                    $('#pas_2').html(numberWithCommas(pas2));
                    $('#pas_3').html(numberWithCommas(pas3));
                    $('#pas_4').html(numberWithCommas(pas4));


                    var tot = 0;
                    tot = parseFloat(pab2) + parseFloat(pas2);


                    $('#pab_1').html(parseFloat(pab2 / tot * 100).toFixed(2) + ' %')

                    $('#pas_1').html(parseFloat(pas2 / tot * 100).toFixed(2) + ' %')




                }

                });
           
            } else {

                $('#pab_1').html('');
                $('#pab_2').html('');
                $('#pab_3').html('');
                $('#pab_4').html('');

                $('#pas_1').html('');
                $('#pas_2').html('');
                $('#pas_3').html('');
                $('#pas_4').html('');

            }

        }
    }



    function fn_set_spider_buy_reset() {
        obj_ac.play();
        $('#btn_buy_spider_step').val('');
        $("#btn_buy_spider_cnt").val(0);
    }

    function fn_set_spider_buy_up() {
        obj_ac.play();
        var num = $('#btn_buy_spider_step').val();

        if (num == '') {
            num = 0;
        }

        num = parseFloat(num) + 0.5;
        $('#btn_buy_spider_step').val(num);
    }

    function fn_set_spider_buy_down() {
        obj_ac.play();
        var num = $('#btn_buy_spider_step').val();

        if (num == '') {
            num = 0;
        }

        num = parseFloat(num) - 0.5;

        if (num <= 0) {
            num = 0;

        }
        $('#btn_buy_spider_step').val(num);
    }



    function fn_set_spider_sell_reset() {
        obj_ac.play();
        $('#btn_sell_spider_step').val('');
        $("#btn_sell_spider_cnt").val(0);
    }

    function fn_set_spider_sell_up() {
        obj_ac.play();
        var num = $('#btn_sell_spider_step').val();

        if (num == '') {
            num = 0;
        }

        num = parseFloat(num) + 0.5;
        $('#btn_sell_spider_step').val(num);
    }

    function fn_set_spider_sell_down() {
        obj_ac.play();
        var num = $('#btn_sell_spider_step').val();

        if (num == '') {
            num = 0;
        }

        num = parseFloat(num) - 0.5;

        if (num <= 0) {
            num = 0;

        }
        $('#btn_sell_spider_step').val(num);
    }

    function fn_set_btn_market() {

        if ($('#view_market').is(":checked")) {

            $('#vm_market_buy').hide();
            $('#vm_market_sell').hide();

        } else {
            $('#vm_market_buy').show();
            $('#vm_market_sell').show();
        }



    }


    function fn_set_btn_chart() {

        if ($('#view_chart').is(":checked")) {
            $('#vm_chart').show();

        } else {
            $('#vm_chart').hide();
        }

    }




    function fn_update_order(objs) {


        var order = null;
        var workingIndicator = '';


        var order_id;
        var order_price;
        var order_size;
        var order_delta;
        var order_type;
        var order_side;

        order_side = objs.side;

        order_id = objs.orderID;

        if (objs.price != null) {
            order_price = objs.price;
        } else {
            order_price = 0;
        }
        if (objs.orderQty != null) {
            order_size = objs.orderQty;
        }
        if (objs.simpleCumQty != null) {
            order_delta = objs.simpleCumQty;
        }
        if (objs.execInst != null) {
            order_type = objs.execInst;
            if (order_type == 'ParticipateDoNotInitiate') {
                order_type = 1;
            } else if (order_type == 'ParticipateDoNotInitiate,ReduceOnly') {
                order_type = 2;
            } else if (order_type == 'ReduceOnly') {
                order_type = 3;
            } else if (order_type == 'Close,LastPrice') {
                order_type = 11;
                if (order_price == 0) {
                    if (objs["data"][i].stopPx != null) {
                        order_price = objs.stopPx;
                    }

                }
            } else if (order_type == 'Close,LastPrice,ParticipateDoNotInitiate') {
                order_type = 21;
                if (order_price == 0) {
                    if (objs["data"][i].stopPx != null) {
                        order_price = objs.stopPx;
                    }

                }

            } else {
                order_type = 0;
            }
        }




        if (order_side == 'Sell') {
            var status_cc = 0;
            var chk_order;

            for (var x = 0; x < g_order_sell.length; x++) {
                chk_order = g_order_sell[x];
                if (chk_order.order_id == order_id) {
                    status_cc = 1;
                }
            }
            if (status_cc != 0) {
                return;
            }


            order = new fn_set_orders(order_id, order_price, order_size, order_delta, order_type);
            g_order_sell.push(order);
        }


        if (order_side == 'Buy') {

            var status_cc = 0;
            var chk_order;

            for (var x = 0; x < g_order_buy.length; x++) {
                chk_order = g_order_buy[x];
                if (chk_order.order_id == order_id) {
                    status_cc = 1;
                }
            }
            if (status_cc != 0) {
                return;
            }


            order = new fn_set_orders(order_id, order_price, order_size, order_delta, order_type);
            g_order_buy.push(order);
        }




        var iHtml = "";

        if (g_order_sell.length >= 1) {

            g_order_sell.sort(function (a, b) {
                return a.order_price < b.order_price ? -1 : a.order_price > b.order_price ? 1 : 0;

            });

            for (var i = 0; i < g_order_sell.length; i++) {
                var order = g_order_sell[i];
                iHtml += '<div id="' + order.order_id + '">';
                iHtml += '<table width="100%" border="0" cellpadding="0" cellspacing="0">';
                iHtml += "			  <tr>";

                if (order.order_type == 1) {
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>P</td>";
                } else if (order.order_type == 2) {
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>P/R</td>";
                } else if (order.order_type == 3) {
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>R</td>";
                } else if (order.order_type == 11) {
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>Stop</td>";
                } else if (order.order_type == 21) {
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>Stop/P.fit</td>";
                } else {
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>-</td>";
                }

                iHtml += "				<td width='25%' class='v_orders_sell' align='center'>" + order.order_price + "</td>";
                iHtml += "				<td width='25%' class='v_orders_sell' align='center'>" + order.order_size + "</td>";
                iHtml += "				<td width='25%' class='v_orders_sell_btn' align='center'  onclick='fn_mex_order_cancel(\"" + order.order_id + "\");' ><i class='fa fa-fw fa-times-circle'></i></td>";

                iHtml += "			  </tr>";
                iHtml += "</table></div>";
            }


            $('#order_sell_list').html(iHtml);
        }

        iHtml = "";

        if (g_order_buy.length >= 1) {


            g_order_buy.sort(function (a, b) {
                return a.order_price > b.order_price ? -1 : a.order_price < b.order_price ? 1 : 0;

            });


            for (var i = 0; i < g_order_buy.length; i++) {
                var order = g_order_buy[i];
                iHtml += '<div id="' + order.order_id + '">';
                iHtml += '<table width="100%" border="0" cellpadding="0" cellspacing="0">';
                iHtml += "			  <tr>";

                if (order.order_type == 1) {
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>P</td>";
                } else if (order.order_type == 2) {
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>P/R</td>";
                } else if (order.order_type == 3) {
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>R</td>";
                } else if (order.order_type == 11) {
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>Stop</td>";
                } else if (order.order_type == 21) {
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>Stop/P.fit</td>";
                } else {
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>-</td>";
                }


                iHtml += "				<td width='25%' class='v_orders_buy' align='center'>" + order.order_price + "</td>";
                iHtml += "				<td width='25%' class='v_orders_buy' align='center'>" + order.order_size + "</td>";
                iHtml += "				<td width='20%' class='v_orders_buy_btn' align='center' onclick='fn_mex_order_cancel(\"" + order.order_id + "\");' ><i class='fa fa-fw fa-times-circle'></i></td>";
                iHtml += "			  </tr>";
                iHtml += "</table></div>";
            }


            $('#order_buy_list').html(iHtml);

        }

    }



    function fn_update_order_bulk(objs) {


        $(objs).each(function (i, member) {



                var order = null;
                var workingIndicator = '';


                var order_id;
                var order_price;
                var order_size;
                var order_delta;
                var order_type;
                var order_side;

                order_side = objs[i].side;

                order_id = objs[i].orderID;


                if (objs[i].price != null) {
                    order_price = objs[i].price;
                } else {
                    order_price = 0;
                }
                if (objs[i].orderQty != null) {
                    order_size = objs[i].orderQty;
                }
                if (objs[i].simpleCumQty != null) {
                    order_delta = objs[i].simpleCumQty;
                }
                if (objs[i].execInst != null) {
                    order_type = objs[i].execInst;
                    if (order_type == 'ParticipateDoNotInitiate') {
                        order_type = 1;
                    } else if (order_type == 'ParticipateDoNotInitiate,ReduceOnly') {
                        order_type = 2;
                    } else if (order_type == 'ReduceOnly') {
                        order_type = 3;
                    } else if (order_type == 'Close,LastPrice') {
                        order_type = 11;
                        if (order_price == 0) {
                            if (objs[i].stopPx != null) {
                                order_price = objs[i].stopPx;
                            }

                        }
                    } else if (order_type == 'Close,LastPrice,ParticipateDoNotInitiate') {
                        order_type = 21;
                        if (order_price == 0) {
                            if (objs[i].stopPx != null) {
                                order_price = objs[i].stopPx;
                            }

                        }

                    } else {
                        order_type = 0;
                    }
                }




                if (order_side == 'Sell') {
                    var status_cc = 0;
                    var chk_order;

                    for (var x = 0; x < g_order_sell.length; x++) {
                        chk_order = g_order_sell[x];
                        if (chk_order.order_id == order_id) {
                            status_cc = 1;
                        }
                    }
                    if (status_cc != 0) {
                        return;
                    }


                    order = new fn_set_orders(order_id, order_price, order_size, order_delta, order_type);
                    g_order_sell.push(order);
                }


                if (order_side == 'Buy') {

                    var status_cc = 0;
                    var chk_order;

                    for (var x = 0; x < g_order_buy.length; x++) {
                        chk_order = g_order_buy[x];
                        if (chk_order.order_id == order_id) {
                            status_cc = 1;
                        }
                    }
                    if (status_cc != 0) {
                        return;
                    }


                    order = new fn_set_orders(order_id, order_price, order_size, order_delta, order_type);
                    g_order_buy.push(order);
                }


        });

        var iHtml = "";

        if (g_order_sell.length >= 1) {

            g_order_sell.sort(function (a, b) {
                return a.order_price < b.order_price ? -1 : a.order_price > b.order_price ? 1 : 0;

            });

            for (var i = 0; i < g_order_sell.length; i++) {
                var order = g_order_sell[i];
                iHtml += '<div id="' + order.order_id + '">';
                iHtml += '<table width="100%" border="0" cellpadding="0" cellspacing="0">';
                iHtml += "			  <tr>";

                if (order.order_type == 1) {
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>P</td>";
                } else if (order.order_type == 2) {
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>P/R</td>";
                } else if (order.order_type == 3) {
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>R</td>";
                } else if (order.order_type == 11) {
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>Stop</td>";
                } else if (order.order_type == 21) {
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>Stop/P.fit</td>";
                } else {
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>-</td>";
                }

                iHtml += "				<td width='25%' class='v_orders_sell' align='center'>" + order.order_price + "</td>";
                iHtml += "				<td width='25%' class='v_orders_sell' align='center'>" + order.order_size + "</td>";
                iHtml += "				<td width='25%' class='v_orders_sell_btn' align='center'  onclick='fn_mex_order_cancel(\"" + order.order_id + "\");' ><i class='fa fa-fw fa-times-circle'></i></td>";

                iHtml += "			  </tr>";
                iHtml += "</table></div>";
            }


            $('#order_sell_list').html(iHtml);
        }

        iHtml = "";

        if (g_order_buy.length >= 1) {


            g_order_buy.sort(function (a, b) {
                return a.order_price > b.order_price ? -1 : a.order_price < b.order_price ? 1 : 0;

            });


            for (var i = 0; i < g_order_buy.length; i++) {
                var order = g_order_buy[i];
                iHtml += '<div id="' + order.order_id + '">';
                iHtml += '<table width="100%" border="0" cellpadding="0" cellspacing="0">';
                iHtml += "			  <tr>";

                if (order.order_type == 1) {
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>P</td>";
                } else if (order.order_type == 2) {
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>P/R</td>";
                } else if (order.order_type == 3) {
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>R</td>";
                } else if (order.order_type == 11) {
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>Stop</td>";
                } else if (order.order_type == 21) {
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>Stop/P.fit</td>";
                } else {
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>-</td>";
                }


                iHtml += "				<td width='25%' class='v_orders_buy' align='center'>" + order.order_price + "</td>";
                iHtml += "				<td width='25%' class='v_orders_buy' align='center'>" + order.order_size + "</td>";
                iHtml += "				<td width='20%' class='v_orders_buy_btn' align='center' onclick='fn_mex_order_cancel(\"" + order.order_id + "\");' ><i class='fa fa-fw fa-times-circle'></i></td>";
                iHtml += "			  </tr>";
                iHtml += "</table></div>";
            }


            $('#order_buy_list').html(iHtml);

        }

    }

</script>



<script type="text/javascript">

    var g_license = 0;

    var g_wallet = 0;
    var g_position = 0;

    var g_member = 0;
    var g_balance = 0;
    var g_pending = 0;

    var g_buy_price = 0;
    var g_sell_price = 0;

    var g_xbt = '';
    var g_xbt_real = 0;
    var g_position_size = 0;
    var g_position_price = 0;
    var g_liquidationPrice = 0;
    var g_position_market_price = 0;
    var g_position_btc = 0;
    var g_marginAvailableMargin = 0;

    var g_marginLeverage = 0;
    var g_leverage = 0;
    var g_marginBalance = 0;

    var g_unrealisedPnl = 0;
    var g_unrealisedPnlPcnt = 0;

    var g_order_buy = [];
    var g_order_sell = [];

    var long_count = 0;
    var short_count = 0;

    var ng_short = 0;
    var ng_long = 0;
    var ng_short_size = 0;
    var ng_long_size = 0;

    var on_bgm = 0;

    var b4_persent = 0;


    var g_5m_buy = 0;
    var g_5m_sell = 0;
    var g_5m_tot = 0;

    var g_5m_cnt_buy = 0;
    var g_5m_cnt_sell = 0;
    var signal_cnt = 0;


    var signal_ai = 0;
    var signal_ai_data = 0;
    var signal_xbt = 0;

    var signal_on_xbt = 0;
    var signal_on_status = 0;

    var on_gxbt = '';

    var on_alert_xbt = 0;


    function fn_rs(txt) {

        g_wws = 0;

        var objs = JSON.parse(txt);

       
        var msg;




	    if (objs.status == 401) {
	        if (objs["request"].op == 'authKeyExpires') {
	            alert(objs.error);
	            fn_connect_api();

	            $('#api_btn').show();
	        }
	        return;
	    }

	    if (objs.status == 403) {
	        if (objs["request"].op == 'authKeyExpires') {
	            alert(objs.error);
	            fn_connect_api();

	            $('#api_btn').show();
	        }
	        return;
	    }

        if (objs.success) {
            if (objs["request"].op == 'authKeyExpires') {
                g_wallet = 1;
                wws.send('{"op":"subscribe","args":["wallet","margin","order:XBTUSD","position:XBTUSD"]}');

                $('#main_access').hide();
                $('#main_trade').show();
             
            }
 
            return;
        }

        if (objs.table == 'wallet') {
           
            $(objs["data"]).each(function (i, member) {

                g_member = objs["data"][i].account;

                g_pending = objs["data"][i].pendingCredit;



                $('#my_deposit').html(parseFloat(g_pending / 100000000).toFixed(6));

            });

            fn_license();

            return;
        }

        if (objs.info == 'Welcome to the BitMEX Realtime API.') {

            $('#api_btn').show();

        } else if (objs.table == 'margin') {
         

            if (objs["data"][0].walletBalance != null) {
                g_balance = objs["data"][0].walletBalance;
                $('#my_balance').html(parseFloat(g_balance / 100000000).toFixed(6));
            }


     
            if (objs["data"][0].marginLeverage != null) {
                g_marginLeverage = objs["data"][0].marginLeverage;
                var leverage;
                if (g_leverage == 0 || g_leverage == 100) {
                    leverage = 'Cross';
                } else {
                    leverage = g_leverage + ' x';
                }
                $('#position_leverage').html('' + parseFloat(g_marginLeverage).toFixed(2) + ' x / ' + '<span style="color:#fff;">' + leverage + '</span');
                
            }
            if (objs["data"][0].availableMargin != null) {
                g_marginAvailableMargin = objs["data"][0].availableMargin;

                $('#my_margin_Available').html(parseFloat(g_marginAvailableMargin / 100000000).toFixed(6));
            }
            if (objs["data"][0].marginBalance != null) {
                g_marginBalance = objs["data"][0].marginBalance;

                $('#my_margin_balance').html(parseFloat(g_marginBalance / 100000000).toFixed(6));
            }


            return;
           
        }else if (objs.table == 'trade') {
       
         
            $(objs["data"]).each(function (i, member) {

                

                if (objs["data"][i].side == 'Sell') {

                    var price = objs["data"][i].price;

                    if (ng_short != price) {
                        ng_short_size = objs["data"][i].size;
                        ng_short = price;
                    } else {
                        ng_short_size += objs["data"][i].size;
                    }

                    sound_size_sell_now += parseInt(objs["data"][i].size);






                    if (g_wallet == 1) {
                        g_5m_cnt_sell = g_5m_cnt_sell + parseInt(objs["data"][i].size);

                        $('#ai_sell_count').html(numberWithCommas(g_5m_cnt_sell) + ' / ' + numberWithCommas(g_5m_tot));

                        $('#ai_sell_count_ps').html(parseFloat(g_5m_cnt_sell / g_5m_tot * 100).toFixed(2) + ' % ');


                        $('#ai_buy_count').html(numberWithCommas(g_5m_cnt_buy) + ' / ' + numberWithCommas(g_5m_tot));

                        $('#ai_buy_count_ps').html(parseFloat(g_5m_cnt_buy / g_5m_tot * 100).toFixed(2) + ' % ');



                        if (g_5m_cnt_sell >= g_5m_tot) {

                            if ($('#btn_ai_buy').is(":checked")) {
                                $('#btn_ai_buy').attr("checked", false);
                                fn_mex_order_post_sell();

                            }


                            g_5m_cnt_sell = parseInt(g_5m_cnt_sell) - parseInt(g_5m_tot);

                            signal_cnt += 1;

                            if (signal_cnt >= 21) {
                                signal_cnt = 0;
                                $('#signal_lamp2').append('?');

                                $('#signal_lamp1').html($('#signal_lamp2').html());
                                $('#signal_lamp2').html('');
                            } else {

                                $('#signal_lamp2').append('?');

                            }

                            if (signal_ai == 0) {
                                signal_ai = 2;
                                signal_xbt = g_xbt_real;
                            }

                            if (signal_ai == 2) {
                                signal_ai_data += 1;
                            } else {
                                signal_ai_data = 0;
                                signal_ai = 1;
                                signal_xbt = g_xbt_real;
                            }

                            var cc_xbt = 0;

                            cc_xbt = g_xbt_real - signal_xbt;
                            $('#ai_msg').html(' XBT : ' + signal_xbt + ' Spread : ' + cc_xbt + '?');
                        }

                    }



                    g_xbt = '<span class="v_short"  style="font-size:1.8rem;" >' + parseFloat(objs["data"][i].price).toFixed(1) + '</span>';
                    g_xbt_real = objs["data"][i].price;


           
                   
                 
    
                } else {
                    g_xbt = '<span class="v_long"  style="font-size:1.8rem;" >' + parseFloat(objs["data"][i].price).toFixed(1) + '</span>';

                    g_xbt_real = objs["data"][i].price;
                    var price = objs["data"][i].price;

                    if (ng_long != price) {
                        ng_long_size = objs["data"][i].size;
                        ng_long = price;
                    } else {
                        ng_long_size += objs["data"][i].size;
                    }

                    sound_size_buy_now += parseInt(objs["data"][i].size);




                    if (g_wallet == 1) {

                        g_5m_cnt_buy = g_5m_cnt_buy + parseInt(objs["data"][i].size);

                        $('#ai_buy_count').html(numberWithCommas(g_5m_cnt_buy) + ' / ' + numberWithCommas(g_5m_tot));

                        $('#ai_buy_count_ps').html(parseFloat(g_5m_cnt_buy / g_5m_tot * 100).toFixed(2) + ' % ');


                        $('#ai_sell_count').html(numberWithCommas(g_5m_cnt_sell) + ' / ' + numberWithCommas(g_5m_tot));

                        $('#ai_sell_count_ps').html(parseFloat(g_5m_cnt_sell / g_5m_tot * 100).toFixed(2) + ' % ');


                        if (g_5m_cnt_buy >= g_5m_tot) {

                            if ($('#btn_ai_sell').is(":checked")) {
                                $('#btn_ai_sell').attr("checked", false);
                                fn_mex_order_post_buy();

                            }


                            g_5m_cnt_buy = parseInt(g_5m_cnt_buy) - parseInt(g_5m_tot);

                            signal_cnt += 1;
                            if (signal_cnt >= 21) {
                                signal_cnt = 0;
                                $('#signal_lamp2').append('<span style="color:#317aff">?</span>');
                                $('#signal_lamp1').html($('#signal_lamp2').html());
                                $('#signal_lamp2').html('');

                            } else {

                                $('#signal_lamp2').append('<span style="color:#317aff">?</span>');

                            }


                            if (signal_ai == 0) {
                                signal_ai = 1;
                                signal_xbt = g_xbt_real;
                            }

                            if (signal_ai == 1) {
                                signal_ai_data += 1;
                            } else {
                                signal_ai_data = 0;
                                signal_ai = 2;
                                signal_xbt = g_xbt_real;

                            }
                            var cc_xbt = 0;

                            cc_xbt = g_xbt_real - signal_xbt;
                            $('#ai_msg').html( ' XBT : ' + signal_xbt + ' Spread ' + cc_xbt + '?');
                        }

                    }

  
       

                }

                $('#xbt_last').html(g_xbt);

            });




            var temp_vol = 0;

            temp_vol = g_vol;

            var del_vol = 0;


            if (sound_size_sell_now >= (sound_size_sell * 10)) {

                temp_vol = temp_vol + 0.3;
                del_vol = sound_size_sell * 10;

                $('#ask_0_1').css('background', '#fa7b7b');
                $('#ask_1_1').css('background', '#fa7b7b');
                $('#ask_2_1').css('background', '#fa7b7b');
                $('#ask_3_1').css('background', '#fa7b7b');
                $('#ask_4_1').css('background', '#fa7b7b');
                $('#ask_5_1').css('background', '#fa7b7b');
                $('#ask_6_1').css('background', '#fa7b7b');
                $('#ask_7_1').css('background', '#fa7b7b');
                $('#ask_8_1').css('background', '#fa7b7b');
                $('#ask_9_1').css('background', '#fa7b7b');

                var xx = setTimeout(fn_return_sell_lamp, 100);

            } else if (sound_size_sell_now >= (sound_size_sell * 9)) {

                temp_vol = temp_vol + 0.3;
                del_vol = sound_size_sell * 9;

                $('#ask_1_1').css('background', '#fa7b7b');
                $('#ask_2_1').css('background', '#fa7b7b');
                $('#ask_3_1').css('background', '#fa7b7b');
                $('#ask_4_1').css('background', '#fa7b7b');
                $('#ask_5_1').css('background', '#fa7b7b');
                $('#ask_6_1').css('background', '#fa7b7b');
                $('#ask_7_1').css('background', '#fa7b7b');
                $('#ask_8_1').css('background', '#fa7b7b');
                $('#ask_9_1').css('background', '#fa7b7b');

                var xx = setTimeout(fn_return_sell_lamp, 100);
            } else if (sound_size_sell_now >= (sound_size_sell * 8)) {

                temp_vol = temp_vol + 0.3;
                del_vol = sound_size_sell * 8;

                $('#ask_2_1').css('background', '#fa7b7b');
                $('#ask_3_1').css('background', '#fa7b7b');
                $('#ask_4_1').css('background', '#fa7b7b');
                $('#ask_5_1').css('background', '#fa7b7b');
                $('#ask_6_1').css('background', '#fa7b7b');
                $('#ask_7_1').css('background', '#fa7b7b');
                $('#ask_8_1').css('background', '#fa7b7b');
                $('#ask_9_1').css('background', '#fa7b7b');


                var xx = setTimeout(fn_return_sell_lamp, 100);
            } else if (sound_size_sell_now >= (sound_size_sell * 7)) {

                temp_vol = temp_vol + 0.3;
                del_vol = sound_size_sell * 7;

                $('#ask_3_1').css('background', '#fa7b7b');
                $('#ask_4_1').css('background', '#fa7b7b');
                $('#ask_5_1').css('background', '#fa7b7b');
                $('#ask_6_1').css('background', '#fa7b7b');
                $('#ask_7_1').css('background', '#fa7b7b');
                $('#ask_8_1').css('background', '#fa7b7b');
                $('#ask_9_1').css('background', '#fa7b7b');


                var xx = setTimeout(fn_return_sell_lamp, 100);
            } else if (sound_size_sell_now >= (sound_size_sell * 6)) {

                temp_vol = temp_vol + 0.2;
                del_vol = sound_size_sell * 6;

                $('#ask_4_1').css('background', '#fa7b7b');
                $('#ask_5_1').css('background', '#fa7b7b');
                $('#ask_6_1').css('background', '#fa7b7b');
                $('#ask_7_1').css('background', '#fa7b7b');
                $('#ask_8_1').css('background', '#fa7b7b');
                $('#ask_9_1').css('background', '#fa7b7b');



                var xx = setTimeout(fn_return_sell_lamp, 100);
            } else if (sound_size_sell_now >= (sound_size_sell * 5)) {

                temp_vol = temp_vol + 0.2;
                del_vol = sound_size_sell * 5;

                $('#ask_5_1').css('background', '#fa7b7b');
                $('#ask_6_1').css('background', '#fa7b7b');
                $('#ask_7_1').css('background', '#fa7b7b');
                $('#ask_8_1').css('background', '#fa7b7b');
                $('#ask_9_1').css('background', '#fa7b7b');


                var xx = setTimeout(fn_return_sell_lamp, 100);
            } else if (sound_size_sell_now >= (sound_size_sell * 4)) {

                temp_vol = temp_vol + 0.2;
                del_vol = sound_size_sell * 4;

                $('#ask_6_1').css('background', '#fa7b7b');
                $('#ask_7_1').css('background', '#fa7b7b');
                $('#ask_8_1').css('background', '#fa7b7b');
                $('#ask_9_1').css('background', '#fa7b7b');



                var xx = setTimeout(fn_return_sell_lamp, 100);

            } else if (sound_size_sell_now >= (sound_size_sell * 3)) {

                temp_vol = temp_vol + 0.1;
                del_vol = sound_size_sell * 3;

                $('#ask_7_1').css('background', '#fa7b7b');
                $('#ask_8_1').css('background', '#fa7b7b');
                $('#ask_9_1').css('background', '#fa7b7b');

                var xx = setTimeout(fn_return_sell_lamp, 100);

            } else if (sound_size_sell_now >= (sound_size_sell * 2)) {

                temp_vol = temp_vol + 0.1;
                del_vol = sound_size_sell * 2;


                $('#ask_8_1').css('background', '#fa7b7b');
                $('#ask_9_1').css('background', '#fa7b7b');
                var xx = setTimeout(fn_return_sell_lamp, 100);

            } else if (sound_size_sell_now >= sound_size_sell) {
                del_vol = sound_size_sell * 1;

                $('#ask_9_1').css('background', '#fa7b7b');
                var xx = setTimeout(fn_return_sell_lamp, 100);
            }

            if (g_vol == 0) {
                temp_vol = 0;
            }



            if (sound_size_sell_now >= sound_size_sell) {



                sound_size_sell_now = sound_size_sell_now - del_vol;


                if ($('#sound_sell').is(":checked")) {
                

                    obj_sell.play();


                }

            }


            del_vol = 0;

            temp_vol = g_vol;

            if (sound_size_buy_now >= (sound_size_sell * 10)) {

                temp_vol = temp_vol + 0.3;
                del_vol = sound_size_sell * 10;

                $('#bid_0_1').css('background', '#92b6ff');
                $('#bid_1_1').css('background', '#92b6ff');
                $('#bid_2_1').css('background', '#92b6ff');
                $('#bid_3_1').css('background', '#92b6ff');
                $('#bid_4_1').css('background', '#92b6ff');
                $('#bid_5_1').css('background', '#92b6ff');
                $('#bid_6_1').css('background', '#92b6ff');
                $('#bid_7_1').css('background', '#92b6ff');
                $('#bid_8_1').css('background', '#92b6ff');
                $('#bid_9_1').css('background', '#92b6ff');

                var xx = setTimeout(fn_return_buy_lamp, 100);

            } else if (sound_size_buy_now >= (sound_size_sell * 9)) {

                temp_vol = temp_vol + 0.3;
                del_vol = sound_size_sell * 9;

                $('#bid_1_1').css('background', '#92b6ff');
                $('#bid_2_1').css('background', '#92b6ff');
                $('#bid_3_1').css('background', '#92b6ff');
                $('#bid_4_1').css('background', '#92b6ff');
                $('#bid_5_1').css('background', '#92b6ff');
                $('#bid_6_1').css('background', '#92b6ff');
                $('#bid_7_1').css('background', '#92b6ff');
                $('#bid_8_1').css('background', '#92b6ff');
                $('#bid_9_1').css('background', '#92b6ff');

                var xx = setTimeout(fn_return_buy_lamp, 100);


            } else if (sound_size_buy_now >= (sound_size_sell * 8)) {

                temp_vol = temp_vol + 0.3;
                del_vol = sound_size_sell * 8;

                $('#bid_2_1').css('background', '#92b6ff');
                $('#bid_3_1').css('background', '#92b6ff');
                $('#bid_4_1').css('background', '#92b6ff');
                $('#bid_5_1').css('background', '#92b6ff');
                $('#bid_6_1').css('background', '#92b6ff');
                $('#bid_7_1').css('background', '#92b6ff');
                $('#bid_8_1').css('background', '#92b6ff');
                $('#bid_9_1').css('background', '#92b6ff');

                var xx = setTimeout(fn_return_buy_lamp, 100);

            } else if (sound_size_buy_now >= (sound_size_sell * 7)) {

                temp_vol = temp_vol + 0.3;
                del_vol = sound_size_sell * 7;

                $('#bid_3_1').css('background', '#92b6ff');
                $('#bid_4_1').css('background', '#92b6ff');
                $('#bid_5_1').css('background', '#92b6ff');
                $('#bid_6_1').css('background', '#92b6ff');
                $('#bid_7_1').css('background', '#92b6ff');
                $('#bid_8_1').css('background', '#92b6ff');
                $('#bid_9_1').css('background', '#92b6ff');

                var xx = setTimeout(fn_return_buy_lamp, 100);
            } else if (sound_size_buy_now >= (sound_size_sell * 6)) {

                temp_vol = temp_vol + 0.2;
                del_vol = sound_size_sell * 6;


                $('#bid_4_1').css('background', '#92b6ff');
                $('#bid_5_1').css('background', '#92b6ff');
                $('#bid_6_1').css('background', '#92b6ff');
                $('#bid_7_1').css('background', '#92b6ff');
                $('#bid_8_1').css('background', '#92b6ff');
                $('#bid_9_1').css('background', '#92b6ff');

                var xx = setTimeout(fn_return_buy_lamp, 100);
            } else if (sound_size_buy_now >= (sound_size_sell * 5)) {

                temp_vol = temp_vol + 0.2;
                del_vol = sound_size_sell * 5;

                $('#bid_5_1').css('background', '#92b6ff');
                $('#bid_6_1').css('background', '#92b6ff');
                $('#bid_7_1').css('background', '#92b6ff');
                $('#bid_8_1').css('background', '#92b6ff');
                $('#bid_9_1').css('background', '#92b6ff');

                var xx = setTimeout(fn_return_buy_lamp, 100);

            } else if (sound_size_buy_now >= (sound_size_sell * 4)) {

                temp_vol = temp_vol + 0.2;
                del_vol = sound_size_sell * 4;

                $('#bid_6_1').css('background', '#92b6ff');
                $('#bid_7_1').css('background', '#92b6ff');
                $('#bid_8_1').css('background', '#92b6ff');
                $('#bid_9_1').css('background', '#92b6ff');

                var xx = setTimeout(fn_return_buy_lamp, 100);
            } else if (sound_size_buy_now >= (sound_size_sell * 3)) {

                temp_vol = temp_vol + 0.1;
                del_vol = sound_size_sell * 3;


                $('#bid_7_1').css('background', '#92b6ff');
                $('#bid_8_1').css('background', '#92b6ff');
                $('#bid_9_1').css('background', '#92b6ff');

                var xx = setTimeout(fn_return_buy_lamp, 100);

            } else if (sound_size_buy_now >= (sound_size_sell * 2)) {

                temp_vol = temp_vol + 0.1;
                del_vol = sound_size_sell * 2;

                $('#bid_8_1').css('background', '#92b6ff');
                $('#bid_9_1').css('background', '#92b6ff');
                var xx = setTimeout(fn_return_buy_lamp, 100);

            } else if (sound_size_buy_now >= sound_size_sell) {

                del_vol = sound_size_sell;

                $('#bid_9_1').css('background', '#92b6ff');
                var xx = setTimeout(fn_return_buy_lamp, 100);
            }

            if (g_vol == 0) {
                temp_vol = 0;
            }


            if (sound_size_buy_now >= sound_size_sell) {

                sound_size_buy_now = sound_size_buy_now - del_vol;

                if ($('#sound_sell').is(":checked")) {



                    obj_buy.play();

                 
                }

            }




        }else if (objs.table == 'orderBook10') {
            var shorts = '';
            var longs = '';

            var buy_price = 0;
            var sell_price = 0;

            var tot_buy = 0;
            var tot_sell = 0;

            var fir_vol1 = 0;
            var fir_vol2 = 0;

            var check_my = 0;

            var tt_buy = 0;
            var tt_sell = 0;
            $(objs["data"][0].bids).each(function (i, member) {
                tt_buy = parseFloat(tt_buy) + parseFloat(objs["data"][0].bids[i][1]);
                tt_sell = parseFloat(tt_sell) + parseFloat(objs["data"][0].asks[i][1]);

                }
            );
   

            $(objs["data"][0].bids).each(function (i, member) {
                tot_buy += objs["data"][0].bids[i][1];
                if (i == 0) {
                    buy_price = objs["data"][0].bids[i][0];
                    fir_vol1 = objs["data"][0].bids[i][1];

                    g_buy_price = buy_price;
                }
                
                check_my = 0;
        
                for (var x = 0; x < g_order_buy.length; x++) {
                    order = g_order_buy[x];

                    if (parseFloat(order.order_price) == parseFloat(objs["data"][0].bids[i][0])) {
                        check_my = 1;
                    }
                }
    
                $('#bid_' + i + '_1').html(numberWithCommas(tot_buy));
     
                if (check_my == 1) {
                    $('#bid_' + i + '_2').html('<span style="color:#ffcc00;">' + numberWithCommas(objs["data"][0].bids[i][1]) + '</span>' );
                } else {
                    $('#bid_' + i + '_2').html(numberWithCommas(objs["data"][0].bids[i][1]));
                }

                var now_my_offer = 0;
                now_my_offer = $('#btn_buy_post_price').val();

                if (parseFloat(now_my_offer) == parseFloat(objs["data"][0].bids[i][0])) {

                    $('#bid_' + i + '_3').html('<span style="color:#ffcc00;">'+numberWithCommas(numberWithCommas(parseFloat(objs["data"][0].bids[i][0]).toFixed(1)))+'</span>');
                } else {
                    $('#bid_' + i + '_3').html(numberWithCommas(numberWithCommas(parseFloat(objs["data"][0].bids[i][0]).toFixed(1))));
                }

                var av = parseFloat(tot_buy / tt_buy * 100);
                av = 100 - av;
                $('#bid_' + i + '_4').css('width', av+'%');
            });
  

            
        


            if ($('#btn_buy_post_price_check').is(":checked")) {

                if ($('#btn_buy_post_price_check').is(":checked")) {
                    var sp = $('#btn_buy_post_price_sp').val();
                    sp = sp.trim();
                    if (sp == '') {
                        sp = 0;
                    }
                    buy_price = parseFloat(buy_price) - parseFloat(sp);

                }

                $('#btn_buy_post_price').val(buy_price);
            }





            $(objs["data"][0].asks).each(function (i, member) {
                tot_sell += objs["data"][0].asks[i][1];
                if (i == 0) {
                    sell_price = objs["data"][0].asks[i][0];
                    fir_vol2 = objs["data"][0].asks[i][1];

                    g_sell_price = sell_price;

                }

                check_my = 0;
         
                for (var x = 0; x < g_order_sell.length; x++) {
                    order = g_order_sell[x];

                    if (parseFloat(order.order_price) == parseFloat(objs["data"][0].asks[i][0])) {
                        check_my = 1;
                    }
                }


   
                $('#ask_' + i + '_1').html(numberWithCommas(tot_sell));

                if (check_my == 1) {
                    $('#ask_' + i + '_2').html('<span style="color:#ffcc00;">' + numberWithCommas(objs["data"][0].asks[i][1])+'</span>');
                } else {
                    $('#ask_' + i + '_2').html(numberWithCommas(objs["data"][0].asks[i][1]));
                }

                var now_my_offer_sell = 0;
                now_my_offer_sell = $('#btn_sell_post_price').val();

                if (parseFloat(now_my_offer_sell) == parseFloat(objs["data"][0].asks[i][0])) {
                    $('#ask_' + i + '_3').html(numberWithCommas('<span style="color:#ffcc00;">' + numberWithCommas(parseFloat(objs["data"][0].asks[i][0]).toFixed(1))) + '</span>');
                } else {
                    $('#ask_' + i + '_3').html(numberWithCommas(numberWithCommas(parseFloat(objs["data"][0].asks[i][0]).toFixed(1))));
                }

                var av = parseFloat(tot_sell / tt_sell * 100);
         
                $('#ask_' + i + '_4').css('width', av + '%');

            });
    

            if ($('#sound_effect').is(":checked")) {
                

                if (on_alert_xbt != sell_price) {
                    on_alert_xbt = sell_price;
                    obj_alert.play();
                    
                } 
            }





            if ($('#btn_sell_post_price_check').is(":checked")) {

                if ($('#btn_sell_post_price_check').is(":checked")) {
                    var sp = $('#btn_sell_post_price_sp').val();
                    sp = sp.trim();
                    if (sp == '') {
                        sp = 0;
                    }
                    sell_price = parseFloat(sell_price) + parseFloat(sp);

                }



                $('#btn_sell_post_price').val(sell_price);
            }


            //$('#order_ask').html(shorts);
            //$('#order_bid').html(longs);


            $('#order_tot_buy').html(numberWithCommas(tot_buy));
            $('#order_tot_sell').html(numberWithCommas(tot_sell));

            var tot = 0;
            tot = parseFloat(tot_sell) + parseFloat(tot_buy);

            var av1 = parseFloat(tot_buy / tot * 100);
            var av2 = parseFloat(tot_sell / tot * 100);
            

            if (av1 > av2) {
                $('#tot_buy_percent').html('<span style="color:#4fff08">' + parseFloat(av1).toFixed(2) + '<br> %</span>');
                if (b4_persent != 1) {

                    b4_persent = 1;
                }
            } else {
                $('#tot_buy_percent').html(parseFloat(av1).toFixed(2) + '<br> %');
            }

            if (av1 < av2) {
                $('#tot_sell_percent').html('<span style="color:#4fff08">' + parseFloat(av2).toFixed(2) + '<br> %</span>');
                if (b4_persent != 2) {

                    b4_persent = 2;
                }
            } else {
                $('#tot_sell_percent').html(parseFloat(av2).toFixed(2) + '<br> %');
            }

            


            var order;
            /*

            for (var i = 0; i < g_order_buy.length; i++) {
                order = g_order_buy[i];

                if (order.order_amend == 1) {

                    if (buy_price != order.order_price) {
                        //$('#debug').html(order.order_id + ' ' + order.order_price );
                        
                        
                    }
                    
                }
            }

            for (var i = 0; i < g_order_sell.length; i++) {
                order = g_order_sell[i];

                if (order.order_amend == 1) {

                    if (sell_price != order.order_price) {
                        //fn_mex_amend(order.order_id, sell_price);
                    }

                }
            }

            */

        } else if (objs.table == 'position') {
           

            $(objs["data"]).each(function (i, member) {


                if (objs["data"][0].leverage != null) {
                    g_leverage = objs["data"][0].leverage;

                    var leverage;
                    if (g_leverage == 0 || g_leverage == 100) {
                        leverage = 'Cross';
                    } else {
                        leverage = g_leverage + ' x';
                    }
                    $('#position_leverage').html('' + parseFloat(g_marginLeverage).toFixed(2) + ' x / ' + '<span style="color:#fff;">' + leverage + '</span');

                }

                if (objs["data"][i].currentQty != null) {
                    g_position_size = objs["data"][i].currentQty;

                    if (g_position_size == 0) {
                        $('#position_style').css('background', 'linear-gradient( to bottom, #999, #555 )');

                        g_liquidationPrice = 0;
                        g_position_price = 0;
                        g_position_market_price = 0;
                        g_unrealisedPnl = 0;
                        g_unrealisedPnlPcnt = 0;
                        g_position_btc = 0;



                        $('#pos_profit').html("");
                        $('#pos_price').html("");
                        $('#pos_size').html("");
                        $('#pos_liq').html("");

                        $('#pos_market_price').html("");

                        $('#pos_pnl').html("");
                        $('#pos_profit_btc').html("");

                        $('#pos_btc').html("");

                        return;
                    }
                }




                if (objs["data"][i].liquidationPrice != null) {
                    g_liquidationPrice = objs["data"][i].liquidationPrice;
                }

                if (objs["data"][i].avgCostPrice != null) {
                    g_position_price = objs["data"][i].avgCostPrice;
                }

                if (objs["data"][i].markPrice != null) {
                    g_position_market_price = objs["data"][i].markPrice;
                }
                if (objs["data"][i].unrealisedPnl != null) {
                    g_unrealisedPnl = objs["data"][i].unrealisedPnl;
                }

                if (objs["data"][i].unrealisedRoePcnt != null) {
                    g_unrealisedPnlPcnt = objs["data"][i].unrealisedRoePcnt;
                }
                if (objs["data"][i].posCost != null) {
                    g_position_btc = objs["data"][i].posCost;
                 

                }
                
                var sum = 0;
      
                if (g_position_size > 0) {
                    g_position = 1;
                   
                    $('#position_style').css('background', 'linear-gradient( to bottom, #318ce7, #166ec5 )');
                    if (g_xbt_real != 0) {
                        sum = (g_position_price - g_xbt_real);
                        sum = sum * (g_position_btc / 100000000);

                        if (sum >= 0) {
                            $('#pos_profit').html('<span style="color:#65fd36">' + parseFloat(sum).toFixed(2) + '</span>');
                        } else {
                            $('#pos_profit').html('<span style="color:#ff6683">' + parseFloat(sum).toFixed(2) + '</span>');
                        }

                        var sum_btc = 0;

                        sum_btc = (g_position_price - g_xbt_real);
                        sum_btc = sum_btc * (g_position_btc / 100000000);
                        sum_btc = sum_btc / g_xbt_real;

                        if (sum_btc >= 0) {
                            $('#pos_profit_btc').html('<span style="color:#65fd36">' + parseFloat(sum_btc).toFixed(4) + '</span>');
                        } else {
                            $('#pos_profit_btc').html('<span style="color:#ff6683">' + parseFloat(sum_btc).toFixed(4) + '</span>');
                        }


                    }

                    $('#pos_price').html(g_position_price);
                    $('#pos_size').html(g_position_size);
                    $('#pos_liq').html(g_liquidationPrice);

                    $('#pos_market_price').html(g_position_market_price);


                    if (g_unrealisedPnl > 0) {
                        $('#pos_pnl').html('<span style="color:#65fd36">' + parseFloat(g_unrealisedPnl / 100000000).toFixed(6) + ' (' + parseFloat(g_unrealisedPnlPcnt * 100).toFixed(2) + ' %' + ')</span>');
                    } else if (g_unrealisedPnl < 0) {
                        $('#pos_pnl').html('<span style="color:#ff6683">' + parseFloat(g_unrealisedPnl / 100000000).toFixed(6) + ' (' + parseFloat(g_unrealisedPnlPcnt * 100).toFixed(2) + ' %' + ')</span>');
                    } else {
                        $('#pos_pnl').html('<span style="color:#fff">' + parseFloat(g_unrealisedPnl / 100000000).toFixed(6) + ' (' + parseFloat(g_unrealisedPnlPcnt * 100).toFixed(2) + ' %' + ')</span>');
                    }


                   $('#pos_btc').html(parseFloat((g_position_btc / 100000000) * -1).toFixed(6));




                } else  if (g_position_size < 0) {
                    g_position = 2;

                    $('#position_style').css('background', 'linear-gradient( to bottom, #89443a, #5d2820 )');


                    if (g_xbt_real != 0) {

                        sum = (g_position_price - g_xbt_real);
                        sum = sum * (g_position_btc / 100000000);


                        if (sum >= 0) {
                            $('#pos_profit').html('<span style="color:#65fd36">' + parseFloat(sum).toFixed(2) + '</span>');
                        } else {
                            $('#pos_profit').html('<span style="color:#ff6683">' + parseFloat(sum).toFixed(2) + '</span>');
                        }

                        var sum_btc = 0;

                        sum_btc = (g_position_price - g_xbt_real);
                        sum_btc = sum_btc * (g_position_btc / 100000000);
                        sum_btc = sum_btc / g_xbt_real;

                        if (sum_btc >= 0) {
                            $('#pos_profit_btc').html('<span style="color:#65fd36">' + parseFloat(sum_btc).toFixed(4) + '</span>');
                        } else {
                            $('#pos_profit_btc').html('<span style="color:#ff6683">' + parseFloat(sum_btc).toFixed(4) + '</span>');
                        }


                    }

                    $('#pos_price').html(g_position_price);
                    $('#pos_size').html(numberWithCommas(g_position_size * -1));
                    $('#pos_liq').html(g_liquidationPrice);

                    $('#pos_market_price').html(g_position_market_price);

                    if (g_unrealisedPnl > 0) {
                        $('#pos_pnl').html('<span style="color:#65fd36">' + parseFloat(g_unrealisedPnl / 100000000).toFixed(6) + ' (' + parseFloat(g_unrealisedPnlPcnt * 100).toFixed(2) + ' %' + ')</span>');
                    } else if (g_unrealisedPnl < 0) {
                        $('#pos_pnl').html('<span style="color:#ff6683">' + parseFloat(g_unrealisedPnl / 100000000).toFixed(6) + ' (' + parseFloat(g_unrealisedPnlPcnt * 100).toFixed(2) + ' %' + ')</span>');
                    } else {
                        $('#pos_pnl').html('<span style="color:#fff">' + parseFloat(g_unrealisedPnl / 100000000).toFixed(6) + ' (' + parseFloat(g_unrealisedPnlPcnt * 100).toFixed(2) + ' %' + ')</span>');
                    }



                    $('#pos_btc').html(parseFloat(g_position_btc / 100000000).toFixed(6));



                }


            });

        } else if (objs.table == 'order') {

            var order = null;
            var workingIndicator = '';


            if (objs.action == 'update') {

                $(objs["data"]).each(function (i, member) {

                    var status = '';

                    if (objs["data"][i].ordStatus != null) {

                        status = objs["data"][i].ordStatus;

                    } else {


                        if (objs["data"][i].price != null) {
                            var order_id = objs["data"][i].orderID;

                            for (var x = 0; x < g_order_buy.length; x++) {
                                order = g_order_buy[x];
                                if (order.order_id == order_id) {
                                    order.order_price = objs["data"][i].price;
                                    g_order_buy[x] = order;
                                }
                            }
                            for (var x = 0; x < g_order_sell.length; x++) {
                                order = g_order_sell[x];
                                if (order.order_id == order_id) {
                                    order.order_price = objs["data"][i].price;
                                    g_order_sell[x] = order;
                                }
                            }
                        }
                        if (objs["data"][i].stopPx != null) {
                            var order_id = objs["data"][i].orderID;

                            for (var x = 0; x < g_order_buy.length; x++) {
                                order = g_order_buy[x];
                                if (order.order_id == order_id) {
                                    order.order_price = objs["data"][i].stopPx;
                                    g_order_buy[x] = order;
                                }
                            }
                            for (var x = 0; x < g_order_sell.length; x++) {
                                order = g_order_sell[x];
                                if (order.order_id == order_id) {
                                    order.order_price = objs["data"][i].stopPx;
                                    g_order_sell[x] = order;
                                }
                            }
                        }

                    }

                    if (objs["data"][i].workingIndicator != null) {         // order fix ?? ?? ?? ??? ?? ??.

                        workingIndicator = objs["data"][i].workingIndicator;

                    }


                    if (status == 'Canceled' || status == 'Rejected') {

                        var order;

                        var order_id = objs["data"][i].orderID;

                        $('#' + order_id).remove();

                        for (var x = 0; x < g_order_buy.length; x++) {
                            order = g_order_buy.shift();
                            if (order.order_id != order_id) {
                                g_order_buy.push(order);
                            }
                        }

                        for (var x = 0; x < g_order_sell.length; x++) {
                            order = g_order_sell.shift();
                            if (order.order_id != order_id) {
                                g_order_sell.push(order);
                            }
                        }

                    } else if (status == 'Filled') {

                        var order;

                        var order_id = objs["data"][i].orderID;

                        $('#' + order_id).remove();

                        for (var x = 0; x < g_order_buy.length; x++) {
                            order = g_order_buy.shift();
                            if (order.order_id != order_id) {
                                g_order_buy.push(order);
                            }
                        }
                        for (var x = 0; x < g_order_sell.length; x++) {
                            order = g_order_sell.shift();
                            if (order.order_id != order_id) {
                                g_order_sell.push(order);
                            }
                        }
                    } else {
                        if (workingIndicator == false) {
                            /*
                            var order_price;
                            if (objs["data"][i].price != null) {
                                var order_price = objs["data"][i].price;

                                for (var i = 0; i < g_order_buy.length; i++) {
                                    order = g_order_buy.shift();
                                    if (order.order_id == order_id) {
                   
                                        order.price = order_price;
                                        g_order_buy.push(order);
                                    } else {
                                        g_order_buy.push(order);
                                    }
                                }
                            }
                            */
                        }


                    }

                });
            } else if (objs.action == 'insert' || objs.action == 'partial') {



                if (objs.action == 'partial') {

                    g_order_buy = [];
                    g_order_sell = [];



                }
                if (objs.action == 'insert') {

                    $(objs["data"]).each(function (i, member) {

                        if (objs["data"][i].price == null) {
                            return;
                        }
                    });


                }

                $(objs["data"]).each(function (i, member) {




                    var order_id;
                    var order_price;
                    var order_size;
                    var order_delta;
                    var order_type;
                    var order_side;

                    order_side = objs["data"][i].side;

                    order_id = objs["data"][i].orderID;

                    if (objs["data"][i].price != null) {
                        order_price = objs["data"][i].price;
                    } else {
                        order_price = 0;
                    }
                    if (objs["data"][i].orderQty != null) {
                        order_size = objs["data"][i].orderQty;
                    }
                    if (objs["data"][i].simpleCumQty != null) {
                        order_delta = objs["data"][i].simpleCumQty;
                    }
                    if (objs["data"][i].execInst != null) {
                        order_type = objs["data"][i].execInst;
                        if (order_type == 'ParticipateDoNotInitiate') {
                            order_type = 1;
                        } else if (order_type == 'ParticipateDoNotInitiate,ReduceOnly') {
                            order_type = 2;
                        } else if (order_type == 'ReduceOnly') {
                            order_type = 3;
                        } else if (order_type == 'Close,LastPrice') {
                            order_type = 11;
                            if (order_price == 0) {
                                if (objs["data"][i].stopPx != null) {
                                    order_price = objs["data"][i].stopPx;
                                }

                            }
                        } else if (order_type == 'Close,LastPrice,ParticipateDoNotInitiate') {
                            order_type = 21;
                            if (order_price == 0) {
                                if (objs["data"][i].stopPx != null) {
                                    order_price = objs["data"][i].stopPx;
                                }

                            }

                        } else {
                            order_type = 0;
                        }
                    }

                    


                    if (order_side == 'Sell') {
                        var status_cc = 0;
                        var chk_order;

                        for (var x = 0; x < g_order_sell.length; x++) {
                            chk_order = g_order_sell[x];
                            if (chk_order.order_id == order_id) {
                                status_cc = 1;
                            }
                        }
                        if (status_cc != 0) {
                            return;
                        }


                        order = new fn_set_orders(order_id, order_price, order_size, order_delta, order_type);
                        g_order_sell.push(order);
                    }


                    if (order_side == 'Buy') {
                        
                        var status_cc = 0;
                        var chk_order;

                        for (var x = 0; x < g_order_buy.length; x++) {
                            chk_order = g_order_buy[x];
                            if (chk_order.order_id == order_id) {
                                status_cc = 1;
                            }
                        }
                        if (status_cc != 0) {
                            return;
                        }


                        order = new fn_set_orders(order_id, order_price, order_size, order_delta, order_type);
                        g_order_buy.push(order);
                    }

                });
            }
            var iHtml = "";

            if (g_order_sell.length >= 1) {

                g_order_sell.sort(function (a, b) {
                    return a.order_price < b.order_price ? -1 : a.order_price > b.order_price ? 1 : 0;

                });

                for (var i = 0; i < g_order_sell.length; i++) {
                    var order = g_order_sell[i];
                    iHtml += '<div id="' + order.order_id + '">';
                    iHtml += '<table width="100%" border="0" cellpadding="0" cellspacing="0">';
                    iHtml += "			  <tr>";
                    
                    if (order.order_type == 1) {
                        iHtml += "				<td width='25%' class='v_orders_sell' align='center'>P</td>";
                    } else if (order.order_type == 2) {
                        iHtml += "				<td width='25%' class='v_orders_sell' align='center'>P/R</td>";
                    } else if (order.order_type == 3) {
                        iHtml += "				<td width='25%' class='v_orders_sell' align='center'>R</td>";
                    } else if (order.order_type == 11) {
                        iHtml += "				<td width='25%' class='v_orders_sell' align='center'>Stop</td>";
                    } else if (order.order_type == 21) {
                        iHtml += "				<td width='25%' class='v_orders_sell' align='center'>Stop/P.fit</td>";
                    } else {
                        iHtml += "				<td width='25%' class='v_orders_sell' align='center'>-</td>";
                    }

                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>" + order.order_price + "</td>";
                    iHtml += "				<td width='25%' class='v_orders_sell' align='center'>" + order.order_size + "</td>";
                    iHtml += "				<td width='25%' class='v_orders_sell_btn' align='center'  onclick='fn_mex_order_cancel(\"" + order.order_id + "\");' ><i class='fa fa-fw fa-times-circle'></i></td>";

                    iHtml += "			  </tr>";
                    iHtml += "</table></div>";
                }


                $('#order_sell_list').html(iHtml);
            }
            iHtml = "";

            if (g_order_buy.length >= 1) {


                g_order_buy.sort(function (a, b) {
                    return a.order_price > b.order_price ? -1 : a.order_price < b.order_price ? 1 : 0;

                });


                for (var i = 0; i < g_order_buy.length; i++) {
                    var order = g_order_buy[i];
                    iHtml += '<div id="' + order.order_id + '">';
                    iHtml += '<table width="100%" border="0" cellpadding="0" cellspacing="0">';
                    iHtml += "			  <tr>";

                    if (order.order_type == 1) {
                        iHtml += "				<td width='25%' class='v_orders_buy' align='center'>P</td>";
                    } else if (order.order_type == 2) {
                        iHtml += "				<td width='25%' class='v_orders_buy' align='center'>P/R</td>";
                    } else if (order.order_type == 3) {
                        iHtml += "				<td width='25%' class='v_orders_buy' align='center'>R</td>";
                    } else if (order.order_type == 11) {
                        iHtml += "				<td width='25%' class='v_orders_buy' align='center'>Stop</td>";
                    } else if (order.order_type == 21) {
                        iHtml += "				<td width='25%' class='v_orders_buy' align='center'>Stop/P.fit</td>";
                    } else {
                        iHtml += "				<td width='25%' class='v_orders_buy' align='center'>-</td>";
                    }


                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>" + order.order_price + "</td>";
                    iHtml += "				<td width='25%' class='v_orders_buy' align='center'>" + order.order_size + "</td>";
                    iHtml += "				<td width='20%' class='v_orders_buy_btn' align='center' onclick='fn_mex_order_cancel(\"" + order.order_id + "\");' ><i class='fa fa-fw fa-times-circle'></i></td>";
                    iHtml += "			  </tr>";
                    iHtml += "</table></div>";
                }


                $('#order_buy_list').html(iHtml);

            }


        } else {

            $('#order_msg').html(txt);
        }



    }

    var order_lev = 0;


    function fn_order_lev(lev) {

        $('#order_leverage').val(lev);

        $('#order_leverage').css('background', '#65fd36');
        $('#order_leverage').css('color', '#000');
        order_lev = lev;

    }

    function fn_order_lev_done() {
        $('#order_leverage').css('background', '#333');
        $('#order_leverage').css('color', '#fff');
    }

    function fn_order_lev_num(lev) {
        order_lev = lev.trim();

        if (order_lev >= 100) {
            order_lev = 100;
        }
        if (order_lev <= 0) {
            order_lev = 0;
        }


        $('#order_lev').val(order_lev);
        
    }

</script>



<script type="text/javascript">


    var finex_tot_buy = 0;
    var finex_tot_sell = 0;

    var finex_last = 0;

    var wwsf = {};


    function fn_connect_finex_api() {

        try {

            wwsf = new WebSocket("wss://api.bitfinex.com/ws/2");

            wwsf.onopen = function () {


            }

            wwsf.onmessage = function (e) {
                fn_finex_rs(e.data);
            }
            wwsf.onclose = function () {


            }
            wwsf.onerror = function (e) {

            }



        } catch (exception) {

        }
    }






    function fn_finex_rs(txt) {



        var objs = JSON.parse(txt);



        if (objs.event == 'info') {
            var msg = '{"event":"subscribe","channel":"trades","symbol":"tBTCUSD"}';
            wwsf.send(msg);

            $('#finex_bid_0_2').html(0);


            $('#finex_ask_0_2').html(0);

      
            return;
        }



        if (objs[1] == 'tu') {

            var price = objs[2][3];
            var order = objs[2][2];

            var price_buy = 0;
            var price_sell = 0;

            if (order >= 0) {
                finex_tot_buy = finex_tot_buy + parseFloat(order);



            } else {
                finex_tot_sell = finex_tot_sell + parseFloat(order * -1);
             


            }

            $('#finex_bid_0_2').html(numberWithCommas(parseFloat(finex_tot_buy).toFixed(4)));


            $('#finex_ask_0_2').html(numberWithCommas(parseFloat(finex_tot_sell).toFixed(4)));


            var tot = finex_tot_buy + finex_tot_sell;

            var av1 = parseFloat(finex_tot_buy / tot * 100);
            var av2 = parseFloat((finex_tot_sell) / tot * 100);

            if (av1 > av2) {

                if (parseFloat(finex_tot_buy) >= 10) {
                    if (finex_last != 1) {
                        finex_last = 1;
                        if ($('#sound_effect_finex').is(":checked")) {
                            obj_buy_finex.play();
                        }
                    }
                }
                $('#finex_bid_0_1').html('<span style="color:#4fff08">' + numberWithCommas(parseFloat(av1).toFixed(2)) + ' %</span>');
                $('#finex_ask_0_1').html(numberWithCommas(parseFloat(av2).toFixed(2)) + ' %');

            } else if (av1 < av2) {

                if (parseFloat(finex_tot_sell) >= 10) {

                    if (finex_last != 2) {
                        finex_last = 2;
                        if ($('#sound_effect_finex').is(":checked")) {
                            obj_sell_finex.play();
                        }

                    }
                }

                $('#finex_bid_0_1').html(numberWithCommas(parseFloat(av1).toFixed(2)) + ' %');
                $('#finex_ask_0_1').html('<span style="color:#4fff08">' + numberWithCommas(parseFloat(av2).toFixed(2)) + ' %</span>');

            }



        }





    }



    function fn_finex_leg() {




        finex_tot_buy = 0;
        finex_tot_sell = 0;


    }

    fn_finex_leg();
    var timer20 = setInterval('fn_finex_leg()', 60000);


</script>


<script language="javascript">





    var gmt = fn_timezone();




    $(document).ready(function () {

        fn_connect_api();



        fn_trade_tx();
        var timer05 = setInterval('fn_trade_tx()', 5000);


        fn_api_share_xbt();
        var timer99 = setInterval('fn_api_share_xbt()', 6000);


        fn_google();

        var timer20 = setInterval('fn_google()', 30000);

        fn_license();
        var timer100 = setInterval('fn_license()', 60000);



        fn_loop();
        var timer999 = setInterval('fn_loop()', 1000);


        fn_connect_finex_api();
    });






</script>
